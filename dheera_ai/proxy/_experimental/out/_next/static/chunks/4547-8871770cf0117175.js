"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4547],{90246:function(e,l,a){a.d(l,{n:function(){return t}});function t(e){let l=[e];return{all:l,lists:()=>[...l,"list"],list:e=>[...l,"list",{params:e}],details:()=>[...l,"detail"],detail:e=>[...l,"detail",e]}}},55584:function(e,l,a){a.d(l,{L:function(){return i}});var t=a(19250),s=a(11713);let r=(0,a(90246).n)("uiSettings"),i=e=>(0,s.a)({queryKey:r.list({}),queryFn:async()=>await (0,t.getUiSettings)(e),enabled:!!e,staleTime:36e5,gcTime:36e5})},94547:function(e,l,a){a.d(l,{Z:function(){return lJ}});var t=a(57437),s=a(29827),r=a(49804),i=a(67101),n=a(84264),o=a(2265),d=a(9114),c=a(19250),m=a(42673);let u=async(e,l,a)=>{try{var t,s;console.log("handling submit for formValues:",e);let l=e.model_mappings||[];if("model_mappings"in e&&delete e.model_mappings,e.model&&e.model.includes("all-wildcard")){let a=e.custom_llm_provider,s=(null!==(t=m.fK[a])&&void 0!==t?t:a.toLowerCase())+"/*";e.model_name=s,l.push({public_name:s,dheera_ai_model:s}),e.model=s}let a=[];for(let t of l){let l={},r={},i=t.public_name;for(let[a,i]of(l.model=t.dheera_ai_model,e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),l.model=t.dheera_ai_model,console.log("formValues add deployment:",e),Object.entries(e)))if(""!==i&&"custom_pricing"!==a&&"pricing_model"!==a&&"cache_control"!==a){if("model_name"==a)l.model=i;else if("custom_llm_provider"==a){console.log("custom_llm_provider:",i);let e=null!==(s=m.fK[i])&&void 0!==s?s:i.toLowerCase();l.custom_llm_provider=e,console.log("custom_llm_provider mappingResult:",e)}else if("model"==a)continue;else if("base_model"===a)r[a]=i;else if("team_id"===a)r.team_id=i;else if("model_access_group"===a)r.access_groups=i;else if("mode"==a)console.log("placing mode in modelInfo"),r.mode=i,delete l.mode;else if("custom_model_name"===a)l.model=i;else if("dheera_ai_extra_params"==a){console.log("dheera_ai_extra_params:",i);let e={};if(i&&void 0!=i){try{e=JSON.parse(i)}catch(e){throw d.Z.fromBackend("Failed to parse DheeraAI Extra Params: "+e),Error("Failed to parse dheera_ai_extra_params: "+e)}for(let[a,t]of Object.entries(e))l[a]=t}}else if("model_info_params"==a){console.log("model_info_params:",i);let e={};if(i&&void 0!=i){try{e=JSON.parse(i)}catch(e){throw d.Z.fromBackend("Failed to parse DheeraAI Extra Params: "+e),Error("Failed to parse dheera_ai_extra_params: "+e)}for(let[l,a]of Object.entries(e))r[l]=a}}else if("input_cost_per_token"===a||"output_cost_per_token"===a||"input_cost_per_second"===a){i&&(l[a]=Number(i));continue}else l[a]=i}a.push({dheera_aiParamsObj:l,modelInfoObj:r,modelName:i})}return a}catch(e){d.Z.fromBackend("Failed to create model: "+e)}},h=async(e,l,a,t)=>{try{let s=await u(e,l,a);if(!s||0===s.length)return;for(let e of s){let{dheera_aiParamsObj:a,modelInfoObj:t,modelName:s}=e,r={model_name:s,dheera_ai_params:a,model_info:t},i=await (0,c.modelCreateCall)(l,r);console.log("response for model create call: ".concat(i.data))}t&&t(),a.resetFields()}catch(e){d.Z.fromBackend("Failed to add model: "+e)}};var x=a(11713),p=a(90246);let g=(0,p.n)("credentials"),f=e=>(0,x.a)({queryKey:g.list({}),queryFn:async()=>await (0,c.credentialListCall)(e),enabled:!!e}),j=(0,p.n)("models");(0,p.n)("modelHub");let _=(e,l,a)=>(0,x.a)({queryKey:j.list({filters:{...l&&{userID:l},...a&&{userRole:a}}}),queryFn:async()=>await (0,c.modelInfoCall)(e,l,a),enabled:!!(e&&l&&a)});var v=a(53410),y=a(74998),b=a(62490),N=a(10032),Z=a(21609),w=a(31283),C=a(57840),S=a(22116),k=a(37592),A=a(99981),I=a(5545);let E=(0,p.n)("providerFields"),F=()=>(0,x.a)({queryKey:E.list({}),queryFn:async()=>await (0,c.getProviderCreateMetadata)(),staleTime:864e5,gcTime:864e5});var P=a(3632),M=a(56522),T=a(47451),R=a(69410),D=a(65319),O=a(4260);let{Link:L}=C.default,V=e=>{var l,a,t,s,r;let i="password"===e.field_type?"password":"select"===e.field_type?"select":"upload"===e.field_type?"upload":"textarea"===e.field_type?"textarea":"text";return{key:e.key,label:e.label,placeholder:null!==(l=e.placeholder)&&void 0!==l?l:void 0,tooltip:null!==(a=e.tooltip)&&void 0!==a?a:void 0,required:null!==(t=e.required)&&void 0!==t&&t,type:i,options:null!==(s=e.options)&&void 0!==s?s:void 0,defaultValue:null!==(r=e.default_value)&&void 0!==r?r:void 0}},z={};var q=e=>{let{selectedProvider:l,uploadProps:a}=e,s=m.Cl[l],r=N.Z.useFormInstance(),{data:i,isLoading:n,error:d}=F(),c=o.useMemo(()=>{if(!i)return null;let e={};return i.forEach(l=>{let a=l.provider_display_name,t=l.credential_fields.map(V);e[a]=t,l.provider&&(e[l.provider]=t),l.dheera_ai_provider&&(e[l.dheera_ai_provider]=t)}),e},[i]);o.useEffect(()=>{c&&Object.assign(z,c)},[c]);let u=o.useMemo(()=>{var e;let a=null!==(e=z[s])&&void 0!==e?e:z[l];if(a)return a;if(!i)return[];let t=i.find(e=>e.provider_display_name===s||e.provider===l||e.dheera_ai_provider===l);if(!t)return[];let r=t.credential_fields.map(V);return z[t.provider_display_name]=r,t.provider&&(z[t.provider]=r),t.dheera_ai_provider&&(z[t.dheera_ai_provider]=r),r},[s,l,i]),h={name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;console.log("Setting field value from JSON, length: ".concat(l.length)),r.setFieldsValue({vertex_credentials:l}),console.log("Form values after setting:",r.getFieldsValue())}},l.readAsText(e)}return!1},onChange(e){console.log("Upload onChange triggered in ProviderSpecificFields"),console.log("Current form values:",r.getFieldsValue()),"uploading"!==e.file.status&&console.log(e.file,e.fileList)}};return(0,t.jsxs)(t.Fragment,{children:[n&&0===u.length&&(0,t.jsx)(T.Z,{children:(0,t.jsx)(R.Z,{span:24,children:(0,t.jsx)(M.x,{className:"mb-2",children:"Loading provider fields..."})})}),d&&0===u.length&&(0,t.jsx)(T.Z,{children:(0,t.jsx)(R.Z,{span:24,children:(0,t.jsx)(M.x,{className:"mb-2 text-red-500",children:d instanceof Error?d.message:"Failed to load provider credential fields"})})}),u.map(e=>{var l;return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(N.Z.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Required"}]:void 0,tooltip:e.tooltip,className:"vertex_credentials"===e.key?"mb-0":void 0,children:"select"===e.type?(0,t.jsx)(k.default,{placeholder:e.placeholder,defaultValue:e.defaultValue,children:null===(l=e.options)||void 0===l?void 0:l.map(e=>(0,t.jsx)(k.default.Option,{value:e,children:e},e))}):"upload"===e.type?(0,t.jsx)(D.default,{...h,onChange:l=>{(null==a?void 0:a.onChange)&&a.onChange(l),setTimeout(()=>{let l=r.getFieldValue(e.key);console.log("".concat(e.key," value after upload:"),JSON.stringify(l))},500)},children:(0,t.jsx)(I.ZP,{icon:(0,t.jsx)(P.Z,{}),children:"Click to Upload"})}):"textarea"===e.type?(0,t.jsx)(O.default.TextArea,{placeholder:e.placeholder,defaultValue:e.defaultValue,rows:6,style:{fontFamily:"monospace",fontSize:"12px"}}):(0,t.jsx)(M.o,{placeholder:e.placeholder,type:"password"===e.type?"password":"text",defaultValue:e.defaultValue})}),"vertex_credentials"===e.key&&(0,t.jsx)(T.Z,{children:(0,t.jsx)(R.Z,{children:(0,t.jsx)(M.x,{className:"mb-3 mt-1",children:"Give a gcp service account(.json file)"})})}),"base_model"===e.key&&(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(R.Z,{span:10}),(0,t.jsx)(R.Z,{span:10,children:(0,t.jsxs)(M.x,{className:"mb-2",children:["The actual model your azure deployment uses. Used for accurate cost tracking. Select name from"," ",(0,t.jsx)(L,{href:"https://github.com/BerriAI/dheera_ai/blob/main/model_prices_and_context_window.json",target:"_blank",children:"here"})]})})]})]},e.key)})]})};let{Link:B}=C.default;var U=e=>{let{open:l,onCancel:a,onAddCredential:s,uploadProps:r}=e,[i]=N.Z.useForm(),[n,d]=(0,o.useState)(m.Cl.OpenAI);return(0,t.jsx)(S.Z,{title:"Add New Credential",open:l,onCancel:()=>{a(),i.resetFields()},footer:null,width:600,children:(0,t.jsxs)(N.Z,{form:i,onFinish:e=>{s(Object.entries(e).reduce((e,l)=>{let[a,t]=l;return""!==t&&null!=t&&(e[a]=t),e},{})),i.resetFields()},layout:"vertical",children:[(0,t.jsx)(N.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],children:(0,t.jsx)(w.o,{placeholder:"Enter a friendly name for these credentials"})}),(0,t.jsx)(N.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,t.jsx)(k.default,{showSearch:!0,onChange:e=>{d(e),i.setFieldValue("custom_llm_provider",e)},children:Object.entries(m.Cl).map(e=>{let[l,a]=e;return(0,t.jsx)(k.default.Option,{value:l,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("img",{src:m.cd[a],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,t=l.parentElement;if(t){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=a.charAt(0),t.replaceChild(e,l)}}}),(0,t.jsx)("span",{children:a})]})},l)})})}),(0,t.jsx)(q,{selectedProvider:n,uploadProps:r}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(A.Z,{title:"Get help on our github",children:(0,t.jsx)(B,{href:"https://github.com/BerriAI/dheera_ai/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(I.ZP,{onClick:()=>{a(),i.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,t.jsx)(I.ZP,{htmlType:"submit",children:"Add Credential"})]})]})]})})};let{Link:G}=C.default;function H(e){let{open:l,onCancel:a,onUpdateCredential:s,uploadProps:r,existingCredential:i}=e,[n]=N.Z.useForm(),[d,c]=(0,o.useState)(m.Cl.Anthropic);return(0,o.useEffect)(()=>{if(i){let e=Object.entries(i.credential_values||{}).reduce((e,l)=>{let[a,t]=l;return e[a]=null!=t?t:null,e},{});n.setFieldsValue({credential_name:i.credential_name,custom_llm_provider:i.credential_info.custom_llm_provider,...e}),c(i.credential_info.custom_llm_provider)}},[i]),(0,t.jsx)(S.Z,{title:"Edit Credential",open:l,onCancel:()=>{a(),n.resetFields()},footer:null,width:600,destroyOnHidden:!0,children:(0,t.jsxs)(N.Z,{form:n,onFinish:e=>{s(Object.entries(e).reduce((e,l)=>{let[a,t]=l;return""!==t&&null!=t&&(e[a]=t),e},{})),n.resetFields()},layout:"vertical",children:[(0,t.jsx)(N.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==i?void 0:i.credential_name,children:(0,t.jsx)(w.o,{placeholder:"Enter a friendly name for these credentials",disabled:null!=i&&!!i.credential_name})}),(0,t.jsx)(N.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,t.jsx)(k.default,{showSearch:!0,onChange:e=>{c(e),n.setFieldValue("custom_llm_provider",e)},children:Object.entries(m.Cl).map(e=>{let[l,a]=e;return(0,t.jsx)(k.default.Option,{value:l,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("img",{src:m.cd[a],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,t=l.parentElement;if(t){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=a.charAt(0),t.replaceChild(e,l)}}}),(0,t.jsx)("span",{children:a})]})},l)})})}),(0,t.jsx)(q,{selectedProvider:d,uploadProps:r}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(A.Z,{title:"Get help on our github",children:(0,t.jsx)(G,{href:"https://github.com/BerriAI/dheera_ai/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(I.ZP,{onClick:()=>{a(),n.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,t.jsx)(I.ZP,{htmlType:"submit",children:"Update Credential"})]})]})]})})}var K=a(39760),J=e=>{var l;let{uploadProps:a}=e,{accessToken:s}=(0,K.Z)(),{data:r,refetch:i}=f(s),n=(null==r?void 0:r.credentials)||[],[m,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),[p,g]=(0,o.useState)(null),[j,_]=(0,o.useState)(null),[w,C]=(0,o.useState)(!1),[S,k]=(0,o.useState)(!1),[A]=N.Z.useForm(),I=["credential_name","custom_llm_provider"],E=async e=>{if(!s)return;let l=Object.entries(e).filter(e=>{let[l]=e;return!I.includes(l)}).reduce((e,l)=>{let[a,t]=l;return{...e,[a]:t}},{}),a={credential_name:e.credential_name,credential_values:l,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,c.credentialUpdateCall)(s,e.credential_name,a),d.Z.success("Credential updated successfully"),x(!1),await i()},F=async e=>{if(!s)return;let l=Object.entries(e).filter(e=>{let[l]=e;return!I.includes(l)}).reduce((e,l)=>{let[a,t]=l;return{...e,[a]:t}},{}),a={credential_name:e.credential_name,credential_values:l,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,c.credentialCreateCall)(s,a),d.Z.success("Credential added successfully"),u(!1),await i()},P=e=>{let l={openai:"blue",azure:"indigo",anthropic:"purple",default:"gray"},a=l[e.toLowerCase()]||l.default;return(0,t.jsx)(b.Ct,{color:a,size:"xs",children:e})},M=async()=>{if(s&&j){k(!0);try{await (0,c.credentialDeleteCall)(s,j.credential_name),d.Z.success("Credential deleted successfully"),await i()}catch(e){d.Z.error("Failed to delete credential")}finally{_(null),C(!1),k(!1)}}},T=e=>{_(e),C(!0)};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto p-2",children:[(0,t.jsx)(b.zx,{onClick:()=>u(!0),children:"Add Credential"}),(0,t.jsx)("div",{className:"flex justify-between items-center mt-4 mb-4",children:(0,t.jsx)(b.xv,{children:"Configured credentials for different AI providers. Add and manage your API credentials."})}),(0,t.jsx)(b.Zb,{children:(0,t.jsxs)(b.iA,{children:[(0,t.jsx)(b.ss,{children:(0,t.jsxs)(b.SC,{children:[(0,t.jsx)(b.xs,{children:"Credential Name"}),(0,t.jsx)(b.xs,{children:"Provider"}),(0,t.jsx)(b.xs,{children:"Actions"})]})}),(0,t.jsx)(b.RM,{children:n&&0!==n.length?n.map((e,l)=>{var a;return(0,t.jsxs)(b.SC,{children:[(0,t.jsx)(b.pj,{children:e.credential_name}),(0,t.jsx)(b.pj,{children:P((null===(a=e.credential_info)||void 0===a?void 0:a.custom_llm_provider)||"-")}),(0,t.jsxs)(b.pj,{children:[(0,t.jsx)(b.zx,{icon:v.Z,variant:"light",size:"sm",onClick:()=>{g(e),x(!0)}}),(0,t.jsx)(b.zx,{icon:y.Z,variant:"light",size:"sm",onClick:()=>T(e),className:"ml-2"})]})]},l)}):(0,t.jsx)(b.SC,{children:(0,t.jsx)(b.pj,{colSpan:4,className:"text-center py-4 text-gray-500",children:"No credentials configured"})})})]})}),m&&(0,t.jsx)(U,{onAddCredential:F,open:m,onCancel:()=>u(!1),uploadProps:a}),h&&(0,t.jsx)(H,{open:h,existingCredential:p,onUpdateCredential:E,uploadProps:a,onCancel:()=>x(!1)}),(0,t.jsx)(Z.Z,{isOpen:w,onCancel:()=>{_(null),C(!1)},onOk:M,title:"Delete Credential?",message:"Are you sure you want to delete this credential? This action cannot be undone and may break existing integrations.",resourceInformationTitle:"Credential Information",resourceInformation:[{label:"Credential Name",value:null==j?void 0:j.credential_name},{label:"Provider",value:(null==j?void 0:null===(l=j.credential_info)||void 0===l?void 0:l.custom_llm_provider)||"-"}],confirmLoading:S,requiredConfirmation:null==j?void 0:j.credential_name})]})};let W=e=>{var l;return(null==e?void 0:null===(l=e.model_info)||void 0===l?void 0:l.team_public_model_name)?e.model_info.team_public_model_name:(null==e?void 0:e.model_name)||"-"};var Y=a(23628),$=a(47323),Q=a(12485),X=a(18135),ee=a(35242),el=a(29706),ea=a(77991),et=a(20347),es=a(59341),er=a(5945),ei=a(84376),en=a(29),eo=a.n(en),ed=a(23496),ec=a(35291),em=a(23639),eu=a(15424);let{Text:eh}=C.default;var ex=e=>{let{formValues:l,accessToken:a,testMode:s,modelName:r="this model",onClose:i,onTestComplete:n}=e,[m,h]=o.useState(null),[x,p]=o.useState(null),[g,f]=o.useState(null),[j,_]=o.useState(!0),[v,y]=o.useState(!1),[b,N]=o.useState(!1),Z=async()=>{_(!0),N(!1),h(null),p(null),f(null),y(!1),await new Promise(e=>setTimeout(e,100));try{console.log("Testing connection with form values:",l);let s=await u(l,a,null);if(!s){console.log("No result from prepareModelAddRequest"),h("Failed to prepare model data. Please check your form inputs."),y(!1),_(!1);return}console.log("Result from prepareModelAddRequest:",s);let{dheera_aiParamsObj:r,modelInfoObj:i,modelName:n}=s[0],o=await (0,c.testConnectionRequest)(a,r,i,null==i?void 0:i.mode);if("success"===o.status)d.Z.success("Connection test successful!"),h(null),y(!0);else{var e,t;let l=(null===(e=o.result)||void 0===e?void 0:e.error)||o.message||"Unknown error";h(l),p(r),f(null===(t=o.result)||void 0===t?void 0:t.raw_request_typed_dict),y(!1)}}catch(e){console.error("Test connection error:",e),h(e instanceof Error?e.message:String(e)),y(!1)}finally{_(!1),n&&n()}};o.useEffect(()=>{let e=setTimeout(()=>{Z()},200);return()=>clearTimeout(e)},[]);let w=e=>e?e.split("stack trace:")[0].trim().replace(/^dheera_ai\.(.*?)Error: /,""):"Unknown error",C="string"==typeof m?w(m):(null==m?void 0:m.message)?w(m.message):"Unknown error",S=g?((e,l,a)=>{let t=JSON.stringify(l,null,2).split("\n").map(e=>"  ".concat(e)).join("\n"),s=Object.entries(a).map(e=>{let[l,a]=e;return"-H '".concat(l,": ").concat(a,"'")}).join(" \\\n  ");return"curl -X POST \\\n  ".concat(e," \\\n  ").concat(s?"".concat(s," \\\n  "):"","-H 'Content-Type: application/json' \\\n  -d '{\n").concat(t,"\n  }'")})(g.raw_request_api_base,g.raw_request_body,g.raw_request_headers||{}):"";return(0,t.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:[j?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,t.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,t.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,t.jsxs)(eh,{style:{fontSize:"16px"},children:["Testing connection to ",r,"..."]}),(0,t.jsx)(eo(),{id:"dc9a0e2d897fe63b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):v?(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,t.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,t.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,t.jsxs)(eh,{type:"success",style:{fontSize:"18px",fontWeight:500,marginLeft:"10px"},children:["Connection to ",r," successful!"]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,t.jsx)(ec.Z,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,t.jsxs)(eh,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",r," failed"]})]}),(0,t.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,t.jsxs)(eh,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,t.jsx)(eh,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:C}),m&&(0,t.jsx)("div",{style:{marginTop:"12px"},children:(0,t.jsx)(I.ZP,{type:"link",onClick:()=>N(!b),style:{paddingLeft:0,height:"auto"},children:b?"Hide Details":"Show Details"})})]}),b&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)(eh,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Troubleshooting Details"}),(0,t.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:"string"==typeof m?m:JSON.stringify(m,null,2)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eh,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"API Request"}),(0,t.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"250px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:S||"No request data available"}),(0,t.jsx)(I.ZP,{style:{marginTop:"8px"},icon:(0,t.jsx)(em.Z,{}),onClick:()=>{navigator.clipboard.writeText(S||""),d.Z.success("Copied to clipboard")},children:"Copy to Clipboard"})]})]})}),(0,t.jsx)(ed.Z,{style:{margin:"24px 0 16px"}}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,t.jsx)(I.ZP,{type:"link",href:"https://docs.dheera_ai.ai/docs/providers",target:"_blank",icon:(0,t.jsx)(eu.Z,{}),children:"View Documentation"})})]})};let ep=async(e,l,a,t)=>{try{console.log("=== AUTO ROUTER SUBMIT HANDLER CALLED ==="),console.log("handling auto router submit for formValues:",e),console.log("Access token:",l?"Present":"Missing"),console.log("Form:",a?"Present":"Missing"),console.log("Callback:",t?"Present":"Missing");let s={model_name:e.auto_router_name,dheera_ai_params:{model:"auto_router/".concat(e.auto_router_name),auto_router_config:JSON.stringify(e.auto_router_config),auto_router_default_model:e.auto_router_default_model},model_info:{}};e.auto_router_embedding_model&&"custom"!==e.auto_router_embedding_model?s.dheera_ai_params.auto_router_embedding_model=e.auto_router_embedding_model:e.custom_embedding_model&&(s.dheera_ai_params.auto_router_embedding_model=e.custom_embedding_model),e.team_id&&(s.model_info.team_id=e.team_id),e.model_access_group&&e.model_access_group.length>0&&(s.model_info.access_groups=e.model_access_group),console.log("Auto router configuration to be created:",s),console.log("Auto router config (stringified):",s.dheera_ai_params.auto_router_config),console.log("Calling modelCreateCall with:",{accessToken:l?"Present":"Missing",config:s});let r=await (0,c.modelCreateCall)(l,s);console.log("response for auto router create call:",r),a.resetFields()}catch(e){console.error("Failed to add auto router:",e),d.Z.fromBackend("Failed to add auto router: "+e)}};var eg=a(10703),ef=a(44851),ej=a(19015),e_=a(96473),ev=a(70464),ey=a(26349),eb=a(92280);let{TextArea:eN}=O.default,{Panel:eZ}=ef.default;var ew=e=>{let{modelInfo:l,value:a,onChange:s}=e,[r,i]=(0,o.useState)([]),[n,d]=(0,o.useState)(!1),[c,m]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(null==a?void 0:a.routes){let e=a.routes.map((e,l)=>({id:e.id||"route-".concat(l,"-").concat(Date.now()),model:e.name||e.model||"",utterances:e.utterances||[],description:e.description||"",score_threshold:e.score_threshold||.5}));i(e),m(e.map(e=>e.id))}else i([]),m([])},[a]);let u=e=>{let l=r.filter(l=>l.id!==e);i(l),x(l),m(l=>l.filter(l=>l!==e))},h=(e,l,a)=>{let t=r.map(t=>t.id===e?{...t,[l]:a}:t);i(t),x(t)},x=e=>{let l={routes:e.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))};null==s||s(l)},p=l.map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsxs)("div",{className:"w-full max-w-none",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eb.x,{className:"text-lg font-semibold",children:"Routes Configuration"}),(0,t.jsx)(A.Z,{title:"Configure routing logic to automatically select the best model based on user input patterns",children:(0,t.jsx)(eu.Z,{className:"text-gray-400"})})]}),(0,t.jsx)(I.ZP,{type:"primary",icon:(0,t.jsx)(e_.Z,{}),onClick:()=>{let e="route-".concat(Date.now()),l=[...r,{id:e,model:"",utterances:[],description:"",score_threshold:.5}];i(l),x(l),m(l=>[...l,e])},className:"bg-blue-600 hover:bg-blue-700",children:"Add Route"})]}),0===r.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200 mb-6",children:(0,t.jsx)(eb.x,{children:"No routes configured. Click “Add Route” to get started."})}):(0,t.jsx)("div",{className:"space-y-3 mb-6 w-full",children:r.map((e,l)=>(0,t.jsx)(er.Z,{className:"border border-gray-200 shadow-sm w-full",bodyStyle:{padding:0},children:(0,t.jsx)(ef.default,{ghost:!0,expandIcon:e=>{let{isActive:l}=e;return(0,t.jsx)(ev.Z,{rotate:l?180:0})},activeKey:c,onChange:e=>m(Array.isArray(e)?e:[e].filter(Boolean)),items:[{key:e.id,label:(0,t.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,t.jsxs)(eb.x,{className:"font-medium text-base",children:["Route ",l+1,": ",e.model||"Unnamed"]}),(0,t.jsx)(I.ZP,{type:"text",danger:!0,icon:(0,t.jsx)(ey.Z,{}),onClick:l=>{l.stopPropagation(),u(e.id)},className:"mr-2"})]}),children:(0,t.jsxs)("div",{className:"px-6 pb-6 w-full",children:[(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsx)(eb.x,{className:"text-sm font-medium mb-2 block",children:"Model"}),(0,t.jsx)(k.default,{value:e.model,onChange:l=>h(e.id,"model",l),placeholder:"Select model",showSearch:!0,style:{width:"100%"},options:p})]}),(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsx)(eb.x,{className:"text-sm font-medium mb-2 block",children:"Description"}),(0,t.jsx)(eN,{value:e.description,onChange:l=>h(e.id,"description",l.target.value),placeholder:"Describe when this route should be used...",rows:2,style:{width:"100%"}})]}),(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(eb.x,{className:"text-sm font-medium",children:"Score Threshold"}),(0,t.jsx)(A.Z,{title:"Minimum similarity score to route to this model (0-1)",children:(0,t.jsx)(eu.Z,{className:"text-gray-400"})})]}),(0,t.jsx)(ej.Z,{value:e.score_threshold,onChange:l=>h(e.id,"score_threshold",l||0),min:0,max:1,step:.1,style:{width:"100%"},placeholder:"0.5"})]}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(eb.x,{className:"text-sm font-medium",children:"Example Utterances"}),(0,t.jsx)(A.Z,{title:"Training examples for this route. Type an utterance and press Enter to add it.",children:(0,t.jsx)(eu.Z,{className:"text-gray-400"})})]}),(0,t.jsx)(eb.x,{className:"text-xs text-gray-500 mb-2",children:"Type an utterance and press Enter to add it. You can also paste multiple lines."}),(0,t.jsx)(k.default,{mode:"tags",value:e.utterances,onChange:l=>h(e.id,"utterances",l),placeholder:"Type an utterance and press Enter...",style:{width:"100%"},tokenSeparators:["\n"],maxTagCount:"responsive",allowClear:!0})]})]})}]})},e.id))}),(0,t.jsxs)("div",{className:"border-t pt-6 w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 w-full",children:[(0,t.jsx)(eb.x,{className:"text-lg font-semibold",children:"JSON Preview"}),(0,t.jsx)(I.ZP,{type:"link",onClick:()=>d(!n),className:"text-blue-600 p-0",children:n?"Hide":"Show"})]}),n&&(0,t.jsx)(er.Z,{className:"bg-gray-50 w-full",children:(0,t.jsx)("pre",{className:"text-sm overflow-auto max-h-64 w-full",children:JSON.stringify({routes:r.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))},null,2)})})]})]})};let{Title:eC,Link:eS}=C.default;var ek=e=>{let{form:l,handleOk:a,accessToken:s,userRole:r}=e,[i,n]=(0,o.useState)(!1),[m,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(""),[p,g]=(0,o.useState)([]),[f,j]=(0,o.useState)([]),[_,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!1),[Z,w]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{g((await (0,c.modelAvailableCall)(s,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[s]),(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,eg.p)(s);console.log("Fetched models for auto router:",e),j(e)}catch(e){console.error("Error fetching model info for auto router:",e)}})()},[s]);let E=et.ZL.includes(r),F=async()=>{u(!0),x("test-".concat(Date.now())),n(!0)},P=()=>{console.log("Auto router submit triggered!"),console.log("Router config:",Z);let e=l.getFieldsValue();if(console.log("Form values:",e),!e.auto_router_name){d.Z.fromBackend("Please enter an Auto Router Name");return}if(!e.auto_router_default_model){d.Z.fromBackend("Please select a Default Model");return}if(l.setFieldsValue({custom_llm_provider:"auto_router",model:e.auto_router_name,api_key:"not_required_for_auto_router"}),!Z||!Z.routes||0===Z.routes.length){d.Z.fromBackend("Please configure at least one route for the auto router");return}if(Z.routes.filter(e=>!e.name||!e.description||0===e.utterances.length).length>0){d.Z.fromBackend("Please ensure all routes have a target model, description, and at least one utterance");return}l.validateFields().then(e=>{console.log("Form validation passed, submitting with values:",e);let t={...e,auto_router_config:Z};console.log("Final submit values:",t),ep(t,s,l,a)}).catch(e=>{console.error("Validation failed:",e);let l=e.errorFields||[];if(l.length>0){let e=l.map(e=>{let l=e.name[0];return({auto_router_name:"Auto Router Name",auto_router_default_model:"Default Model",auto_router_embedding_model:"Embedding Model"})[l]||l});d.Z.fromBackend("Please fill in the following required fields: ".concat(e.join(", ")))}else d.Z.fromBackend("Please fill in all required fields")})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eC,{level:2,children:"Add Auto Router"}),(0,t.jsx)(M.x,{className:"text-gray-600 mb-6",children:"Create an auto router with intelligent routing logic that automatically selects the best model based on user input patterns and semantic matching."}),(0,t.jsx)(er.Z,{children:(0,t.jsxs)(N.Z,{form:l,onFinish:P,labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(N.Z.Item,{rules:[{required:!0,message:"Auto router name is required"}],label:"Auto Router Name",name:"auto_router_name",tooltip:"Unique name for this auto router configuration",labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(M.o,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,t.jsx)("div",{className:"w-full mb-4",children:(0,t.jsx)(ew,{modelInfo:f,value:Z,onChange:e=>{w(e),l.setFieldValue("auto_router_config",e)}})}),(0,t.jsx)(N.Z.Item,{rules:[{required:!0,message:"Default model is required"}],label:"Default Model",name:"auto_router_default_model",tooltip:"Fallback model to use when auto routing logic cannot determine the best model",labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(k.default,{placeholder:"Select a default model",onChange:e=>{v("custom"===e)},options:[...Array.from(new Set(f.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0})}),(0,t.jsx)(N.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",tooltip:"Optional: Embedding model to use for semantic routing decisions",labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(k.default,{value:l.getFieldValue("auto_router_embedding_model"),placeholder:"Select an embedding model (optional)",onChange:e=>{b("custom"===e),l.setFieldValue("auto_router_embedding_model",e)},options:[...Array.from(new Set(f.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0,allowClear:!0})}),(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Settings"}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),E&&(0,t.jsx)(N.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to control who can access this auto router",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:p.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(A.Z,{title:"Get help on our github",children:(0,t.jsx)(C.default.Link,{href:"https://github.com/BerriAI/dheera_ai/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)(I.ZP,{onClick:F,loading:m,children:"Test Connect"}),(0,t.jsx)(I.ZP,{onClick:()=>{console.log("Add Auto Router button clicked!"),console.log("Current router config:",Z),console.log("Current form values:",l.getFieldsValue()),P()},children:"Add Auto Router"})]})]})]})}),(0,t.jsx)(S.Z,{title:"Connection Test Results",open:i,onCancel:()=>{n(!1),u(!1)},footer:[(0,t.jsx)(I.ZP,{onClick:()=>{n(!1),u(!1)},children:"Close"},"close")],width:700,children:i&&(0,t.jsx)(ex,{formValues:l.getFieldsValue(),accessToken:s,testMode:"chat",modelName:l.getFieldValue("auto_router_name"),onClose:()=>{n(!1),u(!1)},onTestComplete:()=>u(!1)},h)})]})};let eA=[{value:"chat",label:"Chat - /chat/completions"},{value:"completion",label:"Completion - /completions"},{value:"embedding",label:"Embedding - /embeddings"},{value:"audio_speech",label:"Audio Speech - /audio/speech"},{value:"audio_transcription",label:"Audio Transcription - /audio/transcriptions"},{value:"image_generation",label:"Image Generation - /images/generations"},{value:"video_generation",label:"Video Generation - /videos"},{value:"rerank",label:"Rerank - /rerank"},{value:"realtime",label:"Realtime - /realtime"},{value:"batch",label:"Batch - /batch"},{value:"ocr",label:"OCR - /ocr"}];var eI=a(63709),eE=a(26210),eF=a(34766),eP=a(45246),eM=a(24199);let{Text:eT}=C.default;var eR=e=>{let{form:l,showCacheControl:a,onCacheControlChange:s}=e,r=e=>{let a=l.getFieldValue("dheera_ai_extra_params");try{let t=a?JSON.parse(a):{};e.length>0?t.cache_control_injection_points=e:delete t.cache_control_injection_points,Object.keys(t).length>0?l.setFieldValue("dheera_ai_extra_params",JSON.stringify(t,null,2)):l.setFieldValue("dheera_ai_extra_params","")}catch(e){console.error("Error updating cache control points:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z.Item,{label:"Cache Control Injection Points",name:"cache_control",valuePropName:"checked",className:"mb-4",tooltip:"Tell dheera_ai where to inject cache control checkpoints. You can specify either by role (to apply to all messages of that role) or by specific message index.",children:(0,t.jsx)(eI.Z,{onChange:s,className:"bg-gray-600"})}),a&&(0,t.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,t.jsx)(eT,{className:"text-sm text-gray-500 block mb-4",children:"Providers like Anthropic, Bedrock API require users to specify where to inject cache control checkpoints, dheera_ai can automatically add them for you as a cost saving feature."}),(0,t.jsx)(N.Z.List,{name:"cache_control_injection_points",initialValue:[{location:"message"}],children:(e,a)=>{let{add:s,remove:i}=a;return(0,t.jsxs)(t.Fragment,{children:[e.map((a,s)=>(0,t.jsxs)("div",{className:"flex items-center mb-4 gap-4",children:[(0,t.jsx)(N.Z.Item,{...a,label:"Type",name:[a.name,"location"],initialValue:"message",className:"mb-0",style:{width:"180px"},children:(0,t.jsx)(k.default,{disabled:!0,options:[{value:"message",label:"Message"}]})}),(0,t.jsx)(N.Z.Item,{...a,label:"Role",name:[a.name,"role"],className:"mb-0",style:{width:"180px"},tooltip:"DheeraAI will mark all messages of this role as cacheable",children:(0,t.jsx)(k.default,{placeholder:"Select a role",allowClear:!0,options:[{value:"user",label:"User"},{value:"system",label:"System"},{value:"assistant",label:"Assistant"}],onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),(0,t.jsx)(N.Z.Item,{...a,label:"Index",name:[a.name,"index"],className:"mb-0",style:{width:"180px"},tooltip:"(Optional) If set dheera_ai will mark the message at this index as cacheable",children:(0,t.jsx)(eM.Z,{type:"number",placeholder:"Optional",step:1,onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),e.length>1&&(0,t.jsx)(eP.Z,{className:"text-red-500 cursor-pointer text-lg ml-12",onClick:()=>{i(a.name),setTimeout(()=>{r(l.getFieldValue("cache_control_points"))},0)}})]},a.key)),(0,t.jsx)(N.Z.Item,{children:(0,t.jsxs)("button",{type:"button",className:"flex items-center justify-center w-full border border-dashed border-gray-300 py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-300 transition-all rounded",onClick:()=>s(),children:[(0,t.jsx)(e_.Z,{className:"mr-2"}),"Add Injection Point"]})})]})}})]})]})},eD=a(9309);let{Link:eO}=C.default;var eL=e=>{let{showAdvancedSettings:l,setShowAdvancedSettings:a,teams:s,guardrailsList:r,tagsList:i}=e,[n]=N.Z.useForm(),[d,c]=o.useState(!1),[m,u]=o.useState("per_token"),[h,x]=o.useState(!1),p=(e,l)=>l&&(isNaN(Number(l))||0>Number(l))?Promise.reject("Please enter a valid positive number"):Promise.resolve();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(eE.UQ,{className:"mt-2 mb-4",children:[(0,t.jsx)(eE._m,{children:(0,t.jsx)("b",{children:"Advanced Settings"})}),(0,t.jsx)(eE.X1,{children:(0,t.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,t.jsx)(N.Z.Item,{label:"Custom Pricing",name:"custom_pricing",valuePropName:"checked",className:"mb-4",children:(0,t.jsx)(eI.Z,{onChange:e=>{c(e),e||n.setFieldsValue({input_cost_per_token:void 0,output_cost_per_token:void 0,input_cost_per_second:void 0})},className:"bg-gray-600"})}),(0,t.jsx)(N.Z.Item,{label:(0,t.jsxs)("span",{children:["Guardrails"," ",(0,t.jsx)(A.Z,{title:"Apply safety guardrails to this key to filter content or enforce policies",children:(0,t.jsx)("a",{href:"https://docs.dheera_ai.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(eu.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:"Select existing guardrails. Go to 'Guardrails' tab to create new guardrails.",children:(0,t.jsx)(k.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:r.map(e=>({value:e,label:e}))})}),(0,t.jsx)(N.Z.Item,{label:"Tags",name:"tags",className:"mb-4",children:(0,t.jsx)(k.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter tags",options:Object.values(i).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}),d&&(0,t.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,t.jsx)(N.Z.Item,{label:"Pricing Model",name:"pricing_model",className:"mb-4",children:(0,t.jsx)(k.default,{defaultValue:"per_token",onChange:e=>u(e),options:[{value:"per_token",label:"Per Million Tokens"},{value:"per_second",label:"Per Second"}]})}),"per_token"===m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z.Item,{label:"Input Cost (per 1M tokens)",name:"input_cost_per_token",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(eE.oi,{})}),(0,t.jsx)(N.Z.Item,{label:"Output Cost (per 1M tokens)",name:"output_cost_per_token",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(eE.oi,{})})]}):(0,t.jsx)(N.Z.Item,{label:"Cost Per Second",name:"input_cost_per_second",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(eE.oi,{})})]}),(0,t.jsx)(N.Z.Item,{label:"Use in pass through routes",name:"use_in_pass_through",valuePropName:"checked",className:"mb-4 mt-4",tooltip:(0,t.jsxs)("span",{children:["Allow using these credentials in pass through routes."," ",(0,t.jsx)(eO,{href:"https://docs.dheera_ai.ai/docs/pass_through/vertex_ai",target:"_blank",children:"Learn more"})]}),children:(0,t.jsx)(eI.Z,{onChange:e=>{let l=n.getFieldValue("dheera_ai_extra_params");try{let a=l?JSON.parse(l):{};e?a.use_in_pass_through=!0:delete a.use_in_pass_through,Object.keys(a).length>0?n.setFieldValue("dheera_ai_extra_params",JSON.stringify(a,null,2)):n.setFieldValue("dheera_ai_extra_params","")}catch(l){e?n.setFieldValue("dheera_ai_extra_params",JSON.stringify({use_in_pass_through:!0},null,2)):n.setFieldValue("dheera_ai_extra_params","")}},className:"bg-gray-600"})}),(0,t.jsx)(eR,{form:n,showCacheControl:h,onCacheControlChange:e=>{if(x(e),!e){let e=n.getFieldValue("dheera_ai_extra_params");try{let l=e?JSON.parse(e):{};delete l.cache_control_injection_points,Object.keys(l).length>0?n.setFieldValue("dheera_ai_extra_params",JSON.stringify(l,null,2)):n.setFieldValue("dheera_ai_extra_params","")}catch(e){n.setFieldValue("dheera_ai_extra_params","")}}}}),(0,t.jsx)(N.Z.Item,{label:"DheeraAI Params",name:"dheera_ai_extra_params",tooltip:"Optional dheera_ai params used for making a dheera_ai.completion() call.",className:"mb-4 mt-4",rules:[{validator:eD.Ac}],children:(0,t.jsx)(eF.Z,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}),(0,t.jsxs)(T.Z,{className:"mb-4",children:[(0,t.jsx)(R.Z,{span:10}),(0,t.jsx)(R.Z,{span:10,children:(0,t.jsxs)(eE.xv,{className:"text-gray-600 text-sm",children:["Pass JSON of dheera_ai supported params"," ",(0,t.jsx)(eO,{href:"https://docs.dheera_ai.ai/docs/completion/input",target:"_blank",children:"dheera_ai.completion() call"})]})})]}),(0,t.jsx)(N.Z.Item,{label:"Model Info",name:"model_info_params",tooltip:"Optional model info params. Returned when calling `/model/info` endpoint.",className:"mb-0",rules:[{validator:eD.Ac}],children:(0,t.jsx)(eF.Z,{rows:4,placeholder:'{ "mode": "chat" }'})})]})})]})})},eV=a(56609),ez=a(67187);let eq=e=>{let{content:l,children:a,width:s="auto",className:r=""}=e,[i,n]=(0,o.useState)(!1),[d,c]=(0,o.useState)("top"),m=(0,o.useRef)(null),u=()=>{if(m.current){let e=m.current.getBoundingClientRect(),l=e.top,a=window.innerHeight-e.bottom;l<300&&a>300?c("bottom"):c("top")}};return(0,t.jsxs)("div",{className:"relative inline-block",ref:m,children:[a||(0,t.jsx)(ez.Z,{className:"ml-1 text-gray-500 cursor-help",onMouseEnter:()=>{u(),n(!0)},onMouseLeave:()=>n(!1)}),i&&(0,t.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 z-50 bg-black/90 text-white p-2 rounded-md text-sm font-normal shadow-lg ".concat(r),style:{["top"===d?"bottom":"top"]:"100%",width:s,marginBottom:"top"===d?"8px":"0",marginTop:"bottom"===d?"8px":"0"},children:[l,(0,t.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 w-0 h-0",style:{top:"top"===d?"100%":"auto",bottom:"bottom"===d?"100%":"auto",borderTop:"top"===d?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderBottom:"bottom"===d?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}})]})]})};var eB=()=>{let e=N.Z.useFormInstance(),[l,a]=(0,o.useState)(0),s=N.Z.useWatch("model",e)||[],r=Array.isArray(s)?s:[s],i=N.Z.useWatch("custom_model_name",e),n=!r.includes("all-wildcard"),d=N.Z.useWatch("custom_llm_provider",e);if((0,o.useEffect)(()=>{if(i&&r.includes("custom")){let l=(e.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.dheera_ai_model?d===m.Cl.Azure?{public_name:i,dheera_ai_model:"azure/".concat(i)}:{public_name:i,dheera_ai_model:i}:e);e.setFieldValue("model_mappings",l),a(e=>e+1)}},[i,r,d,e]),(0,o.useEffect)(()=>{if(r.length>0&&!r.includes("all-wildcard")){let l=e.getFieldValue("model_mappings")||[];if(l.length!==r.length||!r.every(e=>l.some(l=>"custom"===e?"custom"===l.dheera_ai_model||l.dheera_ai_model===i:d===m.Cl.Azure?l.dheera_ai_model==="azure/".concat(e):l.dheera_ai_model===e))){let l=r.map(e=>"custom"===e&&i?d===m.Cl.Azure?{public_name:i,dheera_ai_model:"azure/".concat(i)}:{public_name:i,dheera_ai_model:i}:d===m.Cl.Azure?{public_name:e,dheera_ai_model:"azure/".concat(e)}:{public_name:e,dheera_ai_model:e});e.setFieldValue("model_mappings",l),a(e=>e+1)}}},[r,i,d,e]),!n)return null;let c=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-2 font-normal",children:"The name you specify in your API calls to DheeraAI Proxy"}),(0,t.jsxs)("div",{className:"mb-2 font-normal",children:[(0,t.jsx)("strong",{children:"Example:"})," If you name your public model"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"example-name"}),", and choose"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"openai/qwen-plus-latest"})," as the DheeraAI model"]}),(0,t.jsxs)("div",{className:"mb-2 font-normal",children:[(0,t.jsx)("strong",{children:"Usage:"})," You make an API call to the DheeraAI proxy with"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:'model = "example-name"'})]}),(0,t.jsxs)("div",{className:"font-normal",children:[(0,t.jsx)("strong",{children:"Result:"})," DheeraAI sends"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"qwen-plus-latest"})," to the provider"]})]}),u=(0,t.jsx)("div",{children:"The model name DheeraAI will send to the LLM API"}),h=[{title:(0,t.jsxs)("span",{className:"flex items-center",children:["Public Model Name",(0,t.jsx)(eq,{content:c,width:"500px"})]}),dataIndex:"public_name",key:"public_name",render:(l,a,s)=>(0,t.jsx)(w.o,{value:l,onChange:l=>{let a=[...e.getFieldValue("model_mappings")];a[s].public_name=l.target.value,e.setFieldValue("model_mappings",a)}})},{title:(0,t.jsxs)("span",{className:"flex items-center",children:["DheeraAI Model Name",(0,t.jsx)(eq,{content:u,width:"360px"})]}),dataIndex:"dheera_ai_model",key:"dheera_ai_model"}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(N.Z.Item,{label:"Model Mappings",name:"model_mappings",tooltip:"Map public model names to DheeraAI model names for load balancing",labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",rules:[{required:!0,validator:async(e,l)=>{if(!l||0===l.length)throw Error("At least one model mapping is required");if(l.filter(e=>!e.public_name||""===e.public_name.trim()).length>0)throw Error("All model mappings must have valid public names")}}],children:(0,t.jsx)(eV.Z,{dataSource:e.getFieldValue("model_mappings"),columns:h,pagination:!1,size:"small"},l)})})},eU=e=>{let{selectedProvider:l,providerModels:a,getPlaceholder:s}=e,r=N.Z.useFormInstance(),i=e=>{let a=e.target.value,t=(r.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.dheera_ai_model?l===m.Cl.Azure?{public_name:a,dheera_ai_model:"azure/".concat(a)}:{public_name:a,dheera_ai_model:a}:e);r.setFieldsValue({model_mappings:t})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(N.Z.Item,{label:"DheeraAI Model Name(s)",tooltip:"The model name DheeraAI will send to the LLM API",className:"mb-0",children:[(0,t.jsx)(N.Z.Item,{name:"model",rules:[{required:!0,message:"Please enter ".concat(l===m.Cl.Azure?"a deployment name":"at least one model",".")}],noStyle:!0,children:l===m.Cl.Azure||l===m.Cl.OpenAI_Compatible||l===m.Cl.Ollama?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(M.o,{placeholder:s(l),onChange:l===m.Cl.Azure?e=>{let l=e.target.value,a=l?[{public_name:l,dheera_ai_model:"azure/".concat(l)}]:[];r.setFieldsValue({model:l,model_mappings:a})}:void 0})}):a.length>0?(0,t.jsx)(k.default,{mode:"multiple",allowClear:!0,showSearch:!0,placeholder:"Select models",onChange:e=>{let a=Array.isArray(e)?e:[e];if(a.includes("all-wildcard"))r.setFieldsValue({model_name:void 0,model_mappings:[]});else if(JSON.stringify(r.getFieldValue("model"))!==JSON.stringify(a)){let e=a.map(e=>l===m.Cl.Azure?{public_name:e,dheera_ai_model:"azure/".concat(e)}:{public_name:e,dheera_ai_model:e});r.setFieldsValue({model:a,model_mappings:e})}},optionFilterProp:"children",filterOption:(e,l)=>{var a;return(null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Custom Model Name (Enter below)",value:"custom"},{label:"All ".concat(l," Models (Wildcard)"),value:"all-wildcard"},...a.map(e=>({label:e,value:e}))],style:{width:"100%"}}):(0,t.jsx)(M.o,{placeholder:s(l)})}),(0,t.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.model!==l.model,children:e=>{let{getFieldValue:a}=e,s=a("model")||[];return(Array.isArray(s)?s:[s]).includes("custom")&&(0,t.jsx)(N.Z.Item,{name:"custom_model_name",rules:[{required:!0,message:"Please enter a custom model name."}],className:"mt-2",children:(0,t.jsx)(M.o,{placeholder:l===m.Cl.Azure?"Enter Azure deployment name":"Enter custom model name",onChange:i})})}})]}),(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(R.Z,{span:10}),(0,t.jsx)(R.Z,{span:14,children:(0,t.jsx)(M.x,{className:"mb-3 mt-1",children:l===m.Cl.Azure?"Your deployment name will be saved as the public model name, and DheeraAI will use 'azure/deployment-name' internally":"The model name DheeraAI will send to the LLM API"})})]})]})};let{Title:eG,Link:eH}=C.default;var eK=e=>{let{form:l,handleOk:a,selectedProvider:s,setSelectedProvider:r,providerModels:i,setProviderModelsFn:d,getPlaceholder:u,uploadProps:h,showAdvancedSettings:x,setShowAdvancedSettings:p,teams:g,credentials:f,accessToken:j,userRole:_,premiumUser:v}=e,[y]=N.Z.useForm(),[b,Z]=(0,o.useState)("chat"),[w,E]=(0,o.useState)(!1),[P,M]=(0,o.useState)(!1),[D,O]=(0,o.useState)([]),[L,V]=(0,o.useState)({}),[z,B]=(0,o.useState)(""),{data:U,isLoading:G,error:H}=F();(0,o.useEffect)(()=>{(async()=>{try{let e=(await (0,c.getGuardrailsList)(j)).guardrails.map(e=>e.guardrail_name);O(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[j]),(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,c.tagListCall)(j);V(e)}catch(e){console.error("Failed to fetch tags:",e)}})()},[j]);let K=async()=>{M(!0),B("test-".concat(Date.now())),E(!0)},[J,W]=(0,o.useState)(!1),[Y,$]=(0,o.useState)([]);(0,o.useEffect)(()=>{(async()=>{$((await (0,c.modelAvailableCall)(j,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[j]);let en=(0,o.useMemo)(()=>U?[...U].sort((e,l)=>e.provider_display_name.localeCompare(l.provider_display_name)):[],[U]),eo=H?H instanceof Error?H.message:"Failed to load providers":null,ed=et.ZL.includes(_);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(X.Z,{className:"w-full",children:[(0,t.jsxs)(ee.Z,{className:"mb-4",children:[(0,t.jsx)(Q.Z,{children:"Add Model"}),(0,t.jsx)(Q.Z,{children:"Add Auto Router"})]}),(0,t.jsxs)(ea.Z,{children:[(0,t.jsxs)(el.Z,{children:[(0,t.jsx)(eG,{level:2,children:"Add Model"}),(0,t.jsx)(er.Z,{children:(0,t.jsx)(N.Z,{form:l,onFinish:e=>{console.log("\uD83D\uDD25 Form onFinish triggered with values:",e),a()},onFinishFailed:e=>{console.log("\uD83D\uDCA5 Form onFinishFailed triggered:",e)},labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"E.g. OpenAI, Azure OpenAI, Anthropic, Bedrock, etc.",labelCol:{span:10},labelAlign:"left",children:(0,t.jsxs)(k.default,{showSearch:!0,loading:G,placeholder:G?"Loading providers...":"Select a provider",optionFilterProp:"data-label",onChange:e=>{r(e),d(e),l.setFieldsValue({custom_llm_provider:e}),l.setFieldsValue({model:[],model_name:void 0})},children:[eo&&0===en.length&&(0,t.jsx)(k.default.Option,{value:"",children:eo},"__error"),en.map(e=>{var l;let a=e.provider_display_name,s=e.provider,r=null!==(l=m.cd[a])&&void 0!==l?l:"";return(0,t.jsx)(k.default.Option,{value:s,"data-label":a,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[r?(0,t.jsx)("img",{src:r,alt:"".concat(a," logo"),className:"w-5 h-5",onError:e=>{let l=e.currentTarget,t=l.parentElement;if(t&&t.contains(l))try{let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=a.charAt(0),t.replaceChild(e,l)}catch(e){console.error("Failed to replace provider logo fallback:",e)}}}):(0,t.jsx)("div",{className:"w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:a.charAt(0)}),(0,t.jsx)("span",{children:a})]})},s)})]})}),(0,t.jsx)(eU,{selectedProvider:s,providerModels:i,getPlaceholder:u}),(0,t.jsx)(eB,{}),(0,t.jsx)(N.Z.Item,{label:"Mode",name:"mode",className:"mb-1",children:(0,t.jsx)(k.default,{style:{width:"100%"},value:b,onChange:e=>Z(e),options:eA})}),(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(R.Z,{span:10}),(0,t.jsx)(R.Z,{span:10,children:(0,t.jsxs)(n.Z,{className:"mb-5 mt-1",children:[(0,t.jsx)("strong",{children:"Optional"})," - DheeraAI endpoint to use when health checking this model"," ",(0,t.jsx)(eH,{href:"https://docs.dheera_ai.ai/docs/proxy/health#health",target:"_blank",children:"Learn more"})]})})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(C.default.Text,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter new provider credentials below"})}),(0,t.jsx)(N.Z.Item,{label:"Existing Credentials",name:"dheera_ai_credential_name",initialValue:null,children:(0,t.jsx)(k.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,l)=>{var a;return(null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...f.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,t.jsx)(N.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.dheera_ai_credential_name!==l.dheera_ai_credential_name||e.provider!==l.provider,children:e=>{let{getFieldValue:l}=e,a=l("dheera_ai_credential_name");return(console.log("\uD83D\uDD11 Credential Name Changed:",a),a)?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,t.jsx)(q,{selectedProvider:s,uploadProps:h})]})}}),(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Model Info Settings"}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,t.jsx)(N.Z.Item,{label:"Team-BYOK Model",tooltip:"Only use this model + credential combination for this team. Useful when teams want to onboard their own OpenAI keys.",className:"mb-4",children:(0,t.jsx)(A.Z,{title:v?"":"This is an enterprise-only feature. Upgrade to premium to restrict model+credential combinations to a specific team.",placement:"top",children:(0,t.jsx)(es.Z,{checked:J,onChange:e=>{W(e),e||l.setFieldValue("team_id",void 0)},disabled:!v})})}),J&&(0,t.jsx)(N.Z.Item,{label:"Select Team",name:"team_id",className:"mb-4",tooltip:"Only keys for this team will be able to call this model.",rules:[{required:J&&!ed,message:"Please select a team."}],children:(0,t.jsx)(ei.Z,{teams:g,disabled:!v})}),ed&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(N.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to give users access to select models, and add new ones to the group over time.",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:Y.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})}),(0,t.jsx)(eL,{showAdvancedSettings:x,setShowAdvancedSettings:p,teams:g,guardrailsList:D,tagsList:L}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(A.Z,{title:"Get help on our github",children:(0,t.jsx)(C.default.Link,{href:"https://github.com/BerriAI/dheera_ai/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)(I.ZP,{onClick:K,loading:P,children:"Test Connect"}),(0,t.jsx)(I.ZP,{htmlType:"submit",children:"Add Model"})]})]})]})})})]}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(ek,{form:y,handleOk:()=>{y.validateFields().then(e=>{ep(e,j,y,a)}).catch(e=>{console.error("Validation failed:",e)})},accessToken:j,userRole:_})})]})]}),(0,t.jsx)(S.Z,{title:"Connection Test Results",open:w,onCancel:()=>{E(!1),M(!1)},footer:[(0,t.jsx)(I.ZP,{onClick:()=>{E(!1),M(!1)},children:"Close"},"close")],width:700,children:w&&(0,t.jsx)(ex,{formValues:l.getFieldsValue(),accessToken:j,testMode:b,modelName:l.getFieldValue("model_name")||l.getFieldValue("model"),onClose:()=>{E(!1),M(!1)},onTestComplete:()=>M(!1)},z)})]})},eJ=a(10900),eW=a(45589),eY=a(78489),e$=a(12514),eQ=a(49566),eX=a(96761),e0=a(30401),e1=a(78867),e2=a(59872),e4=e=>{let{isVisible:l,onCancel:a,onSuccess:s,modelData:r,accessToken:i,userRole:n}=e,[m]=N.Z.useForm(),[u,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)([]),[g,f]=(0,o.useState)([]),[j,_]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[b,Z]=(0,o.useState)(null);(0,o.useEffect)(()=>{l&&r&&w()},[l,r]),(0,o.useEffect)(()=>{let e=async()=>{if(i)try{let e=await (0,c.modelAvailableCall)(i,"","",!1,null,!0,!0);p(e.data.map(e=>e.id))}catch(e){console.error("Error fetching model access groups:",e)}},a=async()=>{if(i)try{let e=await (0,eg.p)(i);f(e)}catch(e){console.error("Error fetching model info:",e)}};l&&(e(),a())},[l,i]);let w=()=>{try{var e,l,a,t,s,i;let n=null;(null===(e=r.dheera_ai_params)||void 0===e?void 0:e.auto_router_config)&&(n="string"==typeof r.dheera_ai_params.auto_router_config?JSON.parse(r.dheera_ai_params.auto_router_config):r.dheera_ai_params.auto_router_config),Z(n),m.setFieldsValue({auto_router_name:r.model_name,auto_router_default_model:(null===(l=r.dheera_ai_params)||void 0===l?void 0:l.auto_router_default_model)||"",auto_router_embedding_model:(null===(a=r.dheera_ai_params)||void 0===a?void 0:a.auto_router_embedding_model)||"",model_access_group:(null===(t=r.model_info)||void 0===t?void 0:t.access_groups)||[]});let o=new Set(g.map(e=>e.model_group));_(!o.has(null===(s=r.dheera_ai_params)||void 0===s?void 0:s.auto_router_default_model)),y(!o.has(null===(i=r.dheera_ai_params)||void 0===i?void 0:i.auto_router_embedding_model))}catch(e){console.error("Error parsing auto router config:",e),d.Z.fromBackend("Error loading auto router configuration")}},C=async()=>{try{h(!0);let e=await m.validateFields(),l={...r.dheera_ai_params,auto_router_config:JSON.stringify(b),auto_router_default_model:e.auto_router_default_model,auto_router_embedding_model:e.auto_router_embedding_model||void 0},t={...r.model_info,access_groups:e.model_access_group||[]},n={model_name:e.auto_router_name,dheera_ai_params:l,model_info:t};await (0,c.modelPatchUpdateCall)(i,n,r.model_info.id);let o={...r,model_name:e.auto_router_name,dheera_ai_params:l,model_info:t};d.Z.success("Auto router configuration updated successfully"),s(o),a()}catch(e){console.error("Error updating auto router:",e),d.Z.fromBackend("Failed to update auto router configuration")}finally{h(!1)}},A=g.map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsx)(S.Z,{title:"Edit Auto Router Configuration",open:l,onCancel:a,footer:[(0,t.jsx)(I.ZP,{onClick:a,children:"Cancel"},"cancel"),(0,t.jsx)(I.ZP,{loading:u,onClick:C,children:"Save Changes"},"submit")],width:1e3,destroyOnClose:!0,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(M.x,{className:"text-gray-600",children:"Edit the auto router configuration including routing logic, default models, and access settings."}),(0,t.jsxs)(N.Z,{form:m,layout:"vertical",className:"space-y-4",children:[(0,t.jsx)(N.Z.Item,{label:"Auto Router Name",name:"auto_router_name",rules:[{required:!0,message:"Auto router name is required"}],children:(0,t.jsx)(M.o,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(ew,{modelInfo:g,value:b,onChange:e=>{Z(e)}})}),(0,t.jsx)(N.Z.Item,{label:"Default Model",name:"auto_router_default_model",rules:[{required:!0,message:"Default model is required"}],children:(0,t.jsx)(k.default,{placeholder:"Select a default model",onChange:e=>{_("custom"===e)},options:[...A,{value:"custom",label:"Enter custom model name"}],showSearch:!0})}),(0,t.jsx)(N.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",children:(0,t.jsx)(k.default,{placeholder:"Select an embedding model (optional)",onChange:e=>{y("custom"===e)},options:[...A,{value:"custom",label:"Enter custom model name"}],showSearch:!0,allowClear:!0})}),"Admin"===n&&(0,t.jsx)(N.Z.Item,{label:"Model Access Groups",name:"model_access_group",tooltip:"Control who can access this auto router",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:x.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})]})]})})};let{Title:e5,Link:e6}=C.default;var e3=e=>{let{isVisible:l,onCancel:a,onAddCredential:s,existingCredential:r,setIsCredentialModalOpen:i}=e,[n]=N.Z.useForm();return console.log("existingCredential in add credentials tab: ".concat(JSON.stringify(r))),(0,t.jsx)(S.Z,{title:"Reuse Credentials",visible:l,onCancel:()=>{a(),n.resetFields()},footer:null,width:600,children:(0,t.jsxs)(N.Z,{form:n,onFinish:e=>{s(e),n.resetFields(),i(!1)},layout:"vertical",children:[(0,t.jsx)(N.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==r?void 0:r.credential_name,children:(0,t.jsx)(w.o,{placeholder:"Enter a friendly name for these credentials"})}),Object.entries((null==r?void 0:r.credential_values)||{}).map(e=>{let[l,a]=e;return(0,t.jsx)(N.Z.Item,{label:l,name:l,initialValue:a,children:(0,t.jsx)(w.o,{placeholder:"Enter ".concat(l),disabled:!0})},l)}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(A.Z,{title:"Get help on our github",children:(0,t.jsx)(e6,{href:"https://github.com/BerriAI/dheera_ai/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(I.ZP,{onClick:()=>{a(),n.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,t.jsx)(I.ZP,{htmlType:"submit",children:"Reuse Credentials"})]})]})]})})};function e8(e){var l,a,s,r,u,h,x,p,g,f,j,_,v,b,Z,w,C,E,F,P,M,T,R,D,L,V,z,q,B,U,G,H;let{modelId:K,onClose:J,modelData:$,accessToken:et,userID:es,userRole:er,editModel:ei,setEditModalVisible:en,setSelectedModel:eo,onModelUpdate:ed,modelAccessGroups:ec}=e,[em]=N.Z.useForm(),[eh,ex]=(0,o.useState)(null),[ep,eg]=(0,o.useState)(!1),[ef,ej]=(0,o.useState)(!1),[e_,ev]=(0,o.useState)(!1),[ey,eb]=(0,o.useState)(!1),[eN,eZ]=(0,o.useState)(!1),[ew,eC]=(0,o.useState)(null),[eS,ek]=(0,o.useState)(!1),[eA,eI]=(0,o.useState)({}),[eE,eF]=(0,o.useState)(!1),[eP,eT]=(0,o.useState)([]),[eO,eL]=(0,o.useState)({}),eV=("Admin"===er||(null==$?void 0:null===(l=$.model_info)||void 0===l?void 0:l.created_by)===es)&&(null==$?void 0:null===(a=$.model_info)||void 0===a?void 0:a.db_model),ez="Admin"===er,eq=(null==$?void 0:null===(s=$.dheera_ai_params)||void 0===s?void 0:s.auto_router_config)!=null,eB=(null==$?void 0:null===(r=$.dheera_ai_params)||void 0===r?void 0:r.dheera_ai_credential_name)!=null&&(null==$?void 0:null===(u=$.dheera_ai_params)||void 0===u?void 0:u.dheera_ai_credential_name)!=void 0;console.log("usingExistingCredential, ",eB),console.log("modelData.dheera_ai_params.dheera_ai_credential_name, ",null==$?void 0:null===(h=$.dheera_ai_params)||void 0===h?void 0:h.dheera_ai_credential_name),console.log("tagsList, ",null===(x=$.dheera_ai_params)||void 0===x?void 0:x.tags),(0,o.useEffect)(()=>{let e=async()=>{var e,l,a,t,s,r,i;if(!et)return;let n=await (0,c.modelInfoV1Call)(et,K);console.log("modelInfoResponse, ",n);let o=n.data[0];o&&!o.dheera_ai_model_name&&(o={...o,dheera_ai_model_name:null!==(i=null!==(r=null!==(s=null==o?void 0:null===(l=o.dheera_ai_params)||void 0===l?void 0:l.dheera_ai_model_name)&&void 0!==s?s:null==o?void 0:null===(a=o.dheera_ai_params)||void 0===a?void 0:a.model)&&void 0!==r?r:null==o?void 0:null===(t=o.model_info)||void 0===t?void 0:t.key)&&void 0!==i?i:null}),ex(o),(null==o?void 0:null===(e=o.dheera_ai_params)||void 0===e?void 0:e.cache_control_injection_points)&&ek(!0)},l=async()=>{if(et)try{let e=(await (0,c.getGuardrailsList)(et)).guardrails.map(e=>e.guardrail_name);eT(e)}catch(e){console.error("Failed to fetch guardrails:",e)}},a=async()=>{if(et)try{let e=await (0,c.tagListCall)(et);eL(e)}catch(e){console.error("Failed to fetch tags:",e)}};(async()=>{if(console.log("accessToken, ",et),!et||eB)return;let e=await (0,c.credentialGetCall)(et,null,K);console.log("existingCredentialResponse, ",e),eC({credential_name:e.credential_name,credential_values:e.credential_values,credential_info:e.credential_info})})(),e(),l(),a()},[et,K]);let eU=async e=>{var l;if(console.log("values, ",e),!et)return;let a={credential_name:e.credential_name,model_id:K,credential_info:{custom_llm_provider:null===(l=eh.dheera_ai_params)||void 0===l?void 0:l.custom_llm_provider}};d.Z.info("Storing credential.."),console.log("credentialResponse, ",await (0,c.credentialCreateCall)(et,a)),d.Z.success("Credential stored successfully")},eG=async e=>{try{var l;let a;if(!et)return;eb(!0),console.log("values.model_name, ",e.model_name);let t={};try{t=e.dheera_ai_extra_params?JSON.parse(e.dheera_ai_extra_params):{}}catch(e){d.Z.fromBackend("Invalid JSON in DheeraAI Params"),eb(!1);return}let s={...e.dheera_ai_params,...t,model:e.dheera_ai_model_name,api_base:e.api_base,custom_llm_provider:e.custom_llm_provider,organization:e.organization,tpm:e.tpm,rpm:e.rpm,max_retries:e.max_retries,timeout:e.timeout,stream_timeout:e.stream_timeout,input_cost_per_token:e.input_cost/1e6,output_cost_per_token:e.output_cost/1e6,tags:e.tags};e.guardrails&&(s.guardrails=e.guardrails),e.cache_control&&(null===(l=e.cache_control_injection_points)||void 0===l?void 0:l.length)>0?s.cache_control_injection_points=e.cache_control_injection_points:delete s.cache_control_injection_points;try{a=e.model_info?JSON.parse(e.model_info):$.model_info,e.model_access_group&&(a={...a,access_groups:e.model_access_group})}catch(e){d.Z.fromBackend("Invalid JSON in Model Info");return}let r={model_name:e.model_name,dheera_ai_params:s,model_info:a};await (0,c.modelPatchUpdateCall)(et,r,K);let i={...eh,model_name:e.model_name,dheera_ai_model_name:e.dheera_ai_model_name,dheera_ai_params:s,model_info:a};ex(i),ed&&ed(i),d.Z.success("Model settings updated successfully"),ev(!1),eZ(!1)}catch(e){console.error("Error updating model:",e),d.Z.fromBackend("Failed to update model settings")}finally{eb(!1)}};if(!$)return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(eY.Z,{icon:eJ.Z,variant:"light",onClick:J,className:"mb-4",children:"Back to Models"}),(0,t.jsx)(n.Z,{children:"Model not found"})]});let eH=async()=>{if(et)try{var e,l,a;d.Z.info("Testing connection...");let t=await (0,c.testConnectionRequest)(et,{custom_llm_provider:eh.dheera_ai_params.custom_llm_provider,dheera_ai_credential_name:eh.dheera_ai_params.dheera_ai_credential_name,model:eh.dheera_ai_model_name},{mode:null===(e=eh.model_info)||void 0===e?void 0:e.mode},null===(l=eh.model_info)||void 0===l?void 0:l.mode);if("success"===t.status)d.Z.success("Connection test successful!");else throw Error((null==t?void 0:null===(a=t.result)||void 0===a?void 0:a.error)||(null==t?void 0:t.message)||"Unknown error")}catch(e){e instanceof Error?d.Z.error("Error testing connection: "+(0,eD.aS)(e.message,100)):d.Z.error("Error testing connection: "+String(e))}},eK=async()=>{try{if(!et)return;await (0,c.modelDeleteCall)(et,K),d.Z.success("Model deleted successfully"),ed&&ed({deleted:!0,model_info:{id:K}}),J()}catch(e){console.error("Error deleting the model:",e),d.Z.fromBackend("Failed to delete model")}},e5=async(e,l)=>{await (0,e2.vQ)(e)&&(eI(e=>({...e,[l]:!0})),setTimeout(()=>{eI(e=>({...e,[l]:!1}))},2e3))};return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(eY.Z,{icon:eJ.Z,variant:"light",onClick:J,className:"mb-4",children:"Back to Models"}),(0,t.jsxs)(eX.Z,{children:["Public Model Name: ",W($)]}),(0,t.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)(n.Z,{className:"text-gray-500 font-mono",children:$.model_info.id}),(0,t.jsx)(I.ZP,{type:"text",size:"small",icon:eA["model-id"]?(0,t.jsx)(e0.Z,{size:12}):(0,t.jsx)(e1.Z,{size:12}),onClick:()=>e5($.model_info.id,"model-id"),className:"left-2 z-10 transition-all duration-200 ".concat(eA["model-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(eY.Z,{variant:"secondary",icon:Y.Z,onClick:eH,className:"flex items-center gap-2","data-testid":"test-connection-button",children:"Test Connection"}),(0,t.jsx)(eY.Z,{icon:eW.Z,variant:"secondary",onClick:()=>ej(!0),className:"flex items-center",disabled:!ez,"data-testid":"reuse-credentials-button",children:"Re-use Credentials"}),(0,t.jsx)(eY.Z,{icon:y.Z,variant:"secondary",onClick:()=>eg(!0),className:"flex items-center text-red-500 border-red-500 hover:text-red-700",disabled:!eV,"data-testid":"delete-model-button",children:"Delete Model"})]})]}),(0,t.jsxs)(X.Z,{children:[(0,t.jsxs)(ee.Z,{className:"mb-6",children:[(0,t.jsx)(Q.Z,{children:"Overview"}),(0,t.jsx)(Q.Z,{children:"Raw JSON"})]}),(0,t.jsxs)(ea.Z,{children:[(0,t.jsxs)(el.Z,{children:[(0,t.jsxs)(i.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6 mb-6",children:[(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(n.Z,{children:"Provider"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[$.provider&&(0,t.jsx)("img",{src:(0,m.dr)($.provider).logo,alt:"".concat($.provider," logo"),className:"w-4 h-4",onError:e=>{let l=e.currentTarget,a=l.parentElement;if(a&&a.contains(l))try{var t;let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=(null===(t=$.provider)||void 0===t?void 0:t.charAt(0))||"-",a.replaceChild(e,l)}catch(e){console.error("Failed to replace provider logo fallback:",e)}}}),(0,t.jsx)(eX.Z,{children:$.provider||"Not Set"})]})]}),(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(n.Z,{children:"DheeraAI Model"}),(0,t.jsx)("div",{className:"mt-2 overflow-hidden",children:(0,t.jsx)(A.Z,{title:$.dheera_ai_model_name||"Not Set",children:(0,t.jsx)("div",{className:"break-all text-sm font-medium leading-relaxed cursor-pointer",children:$.dheera_ai_model_name||"Not Set"})})})]}),(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(n.Z,{children:"Pricing"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)(n.Z,{children:["Input: $",$.input_cost,"/1M tokens"]}),(0,t.jsxs)(n.Z,{children:["Output: $",$.output_cost,"/1M tokens"]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 text-sm text-gray-500 flex items-center gap-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Created At"," ",$.model_info.created_at?new Date($.model_info.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not Set"]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Created By ",$.model_info.created_by||"Not Set"]})]}),(0,t.jsxs)(e$.Z,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(eX.Z,{children:"Model Settings"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[eq&&eV&&!eN&&(0,t.jsx)(eY.Z,{onClick:()=>eF(!0),className:"flex items-center",children:"Edit Auto Router"}),eV?!eN&&(0,t.jsx)(eY.Z,{onClick:()=>eZ(!0),className:"flex items-center",children:"Edit Settings"}):(0,t.jsx)(A.Z,{title:"Only DB models can be edited. You must be an admin or the creator of the model to edit it.",children:(0,t.jsx)(eu.Z,{})})]})]}),eh?(0,t.jsx)(N.Z,{form:em,onFinish:eG,initialValues:{model_name:eh.model_name,dheera_ai_model_name:eh.dheera_ai_model_name,api_base:eh.dheera_ai_params.api_base,custom_llm_provider:eh.dheera_ai_params.custom_llm_provider,organization:eh.dheera_ai_params.organization,tpm:eh.dheera_ai_params.tpm,rpm:eh.dheera_ai_params.rpm,max_retries:eh.dheera_ai_params.max_retries,timeout:eh.dheera_ai_params.timeout,stream_timeout:eh.dheera_ai_params.stream_timeout,input_cost:eh.dheera_ai_params.input_cost_per_token?1e6*eh.dheera_ai_params.input_cost_per_token:(null===(p=eh.model_info)||void 0===p?void 0:p.input_cost_per_token)*1e6||null,output_cost:(null===(g=eh.dheera_ai_params)||void 0===g?void 0:g.output_cost_per_token)?1e6*eh.dheera_ai_params.output_cost_per_token:(null===(f=eh.model_info)||void 0===f?void 0:f.output_cost_per_token)*1e6||null,cache_control:null!==(j=eh.dheera_ai_params)&&void 0!==j&&!!j.cache_control_injection_points,cache_control_injection_points:(null===(_=eh.dheera_ai_params)||void 0===_?void 0:_.cache_control_injection_points)||[],model_access_group:Array.isArray(null===(v=eh.model_info)||void 0===v?void 0:v.access_groups)?eh.model_info.access_groups:[],guardrails:Array.isArray(null===(b=eh.dheera_ai_params)||void 0===b?void 0:b.guardrails)?eh.dheera_ai_params.guardrails:[],tags:Array.isArray(null===(Z=eh.dheera_ai_params)||void 0===Z?void 0:Z.tags)?eh.dheera_ai_params.tags:[],dheera_ai_extra_params:JSON.stringify(eh.dheera_ai_params||{},null,2)},layout:"vertical",onValuesChange:()=>ev(!0),children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Model Name"}),eN?(0,t.jsx)(N.Z.Item,{name:"model_name",className:"mb-0",children:(0,t.jsx)(eQ.Z,{placeholder:"Enter model name"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:eh.model_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"DheeraAI Model Name"}),eN?(0,t.jsx)(N.Z.Item,{name:"dheera_ai_model_name",className:"mb-0",children:(0,t.jsx)(eQ.Z,{placeholder:"Enter DheeraAI model name"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:eh.dheera_ai_model_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Input Cost (per 1M tokens)"}),eN?(0,t.jsx)(N.Z.Item,{name:"input_cost",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter input cost"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==eh?void 0:null===(w=eh.dheera_ai_params)||void 0===w?void 0:w.input_cost_per_token)?((null===(C=eh.dheera_ai_params)||void 0===C?void 0:C.input_cost_per_token)*1e6).toFixed(4):(null==eh?void 0:null===(E=eh.model_info)||void 0===E?void 0:E.input_cost_per_token)?(1e6*eh.model_info.input_cost_per_token).toFixed(4):null})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Output Cost (per 1M tokens)"}),eN?(0,t.jsx)(N.Z.Item,{name:"output_cost",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter output cost"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==eh?void 0:null===(F=eh.dheera_ai_params)||void 0===F?void 0:F.output_cost_per_token)?(1e6*eh.dheera_ai_params.output_cost_per_token).toFixed(4):(null==eh?void 0:null===(P=eh.model_info)||void 0===P?void 0:P.output_cost_per_token)?(1e6*eh.model_info.output_cost_per_token).toFixed(4):null})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"API Base"}),eN?(0,t.jsx)(N.Z.Item,{name:"api_base",className:"mb-0",children:(0,t.jsx)(eQ.Z,{placeholder:"Enter API base"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(M=eh.dheera_ai_params)||void 0===M?void 0:M.api_base)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Custom LLM Provider"}),eN?(0,t.jsx)(N.Z.Item,{name:"custom_llm_provider",className:"mb-0",children:(0,t.jsx)(eQ.Z,{placeholder:"Enter custom LLM provider"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(T=eh.dheera_ai_params)||void 0===T?void 0:T.custom_llm_provider)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Organization"}),eN?(0,t.jsx)(N.Z.Item,{name:"organization",className:"mb-0",children:(0,t.jsx)(eQ.Z,{placeholder:"Enter organization"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(R=eh.dheera_ai_params)||void 0===R?void 0:R.organization)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"TPM (Tokens per Minute)"}),eN?(0,t.jsx)(N.Z.Item,{name:"tpm",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter TPM"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(D=eh.dheera_ai_params)||void 0===D?void 0:D.tpm)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"RPM (Requests per Minute)"}),eN?(0,t.jsx)(N.Z.Item,{name:"rpm",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter RPM"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(L=eh.dheera_ai_params)||void 0===L?void 0:L.rpm)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Max Retries"}),eN?(0,t.jsx)(N.Z.Item,{name:"max_retries",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter max retries"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(V=eh.dheera_ai_params)||void 0===V?void 0:V.max_retries)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Timeout (seconds)"}),eN?(0,t.jsx)(N.Z.Item,{name:"timeout",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter timeout"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(z=eh.dheera_ai_params)||void 0===z?void 0:z.timeout)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Stream Timeout (seconds)"}),eN?(0,t.jsx)(N.Z.Item,{name:"stream_timeout",className:"mb-0",children:(0,t.jsx)(eM.Z,{placeholder:"Enter stream timeout"})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(q=eh.dheera_ai_params)||void 0===q?void 0:q.stream_timeout)||"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Model Access Groups"}),eN?(0,t.jsx)(N.Z.Item,{name:"model_access_group",className:"mb-0",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:null==ec?void 0:ec.map(e=>({value:e,label:e}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(B=eh.model_info)||void 0===B?void 0:B.access_groups)?Array.isArray(eh.model_info.access_groups)?eh.model_info.access_groups.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:eh.model_info.access_groups.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},l))}):"No groups assigned":eh.model_info.access_groups:"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Z,{className:"font-medium",children:["Guardrails",(0,t.jsx)(A.Z,{title:"Apply safety guardrails to this model to filter content or enforce policies",children:(0,t.jsx)("a",{href:"https://docs.dheera_ai.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(eu.Z,{style:{marginLeft:"4px"}})})})]}),eN?(0,t.jsx)(N.Z.Item,{name:"guardrails",className:"mb-0",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing guardrails or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:eP.map(e=>({value:e,label:e}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(U=eh.dheera_ai_params)||void 0===U?void 0:U.guardrails)?Array.isArray(eh.dheera_ai_params.guardrails)?eh.dheera_ai_params.guardrails.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:eh.dheera_ai_params.guardrails.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},l))}):"No guardrails assigned":eh.dheera_ai_params.guardrails:"Not Set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Tags"}),eN?(0,t.jsx)(N.Z.Item,{name:"tags",className:"mb-0",children:(0,t.jsx)(k.default,{mode:"tags",showSearch:!0,placeholder:"Select existing tags or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:Object.values(eO).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(G=eh.dheera_ai_params)||void 0===G?void 0:G.tags)?Array.isArray(eh.dheera_ai_params.tags)?eh.dheera_ai_params.tags.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:eh.dheera_ai_params.tags.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e},l))}):"No tags assigned":eh.dheera_ai_params.tags:"Not Set"})]}),eN?(0,t.jsx)(eR,{form:em,showCacheControl:eS,onCacheControlChange:e=>ek(e)}):(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Cache Control"}),(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(H=eh.dheera_ai_params)||void 0===H?void 0:H.cache_control_injection_points)?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Enabled"}),(0,t.jsx)("div",{className:"mt-2",children:eh.dheera_ai_params.cache_control_injection_points.map((e,l)=>(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",e.location,",",e.role&&(0,t.jsxs)("span",{children:[" Role: ",e.role]}),void 0!==e.index&&(0,t.jsxs)("span",{children:[" Index: ",e.index]})]},l))})]}):"Disabled"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Model Info"}),eN?(0,t.jsx)(N.Z.Item,{name:"model_info",className:"mb-0",children:(0,t.jsx)(O.default.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}',defaultValue:JSON.stringify($.model_info,null,2)})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(eh.model_info,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Z,{className:"font-medium",children:["DheeraAI Params",(0,t.jsx)(A.Z,{title:"Optional dheera_ai params used for making a dheera_ai.completion() call. Some params are automatically added by DheeraAI.",children:(0,t.jsx)("a",{href:"https://docs.dheera_ai.ai/docs/completion/input",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(eu.Z,{style:{marginLeft:"4px"}})})})]}),eN?(0,t.jsx)(N.Z.Item,{name:"dheera_ai_extra_params",rules:[{validator:eD.Ac}],children:(0,t.jsx)(O.default.TextArea,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(eh.dheera_ai_params,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Team ID"}),(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:$.model_info.team_id||"Not Set"})]})]}),eN&&(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,t.jsx)(eY.Z,{variant:"secondary",onClick:()=>{em.resetFields(),ev(!1),eZ(!1)},disabled:ey,children:"Cancel"}),(0,t.jsx)(eY.Z,{variant:"primary",onClick:()=>em.submit(),loading:ey,children:"Save Changes"})]})]})}):(0,t.jsx)(n.Z,{children:"Loading..."})]})]}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(e$.Z,{children:(0,t.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify($,null,2)})})})]})]}),ep&&(0,t.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Model"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this model?"})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)(I.ZP,{onClick:eK,className:"ml-2",danger:!0,children:"Delete"}),(0,t.jsx)(I.ZP,{onClick:()=>eg(!1),children:"Cancel"})]})]})]})}),ef&&!eB?(0,t.jsx)(e3,{isVisible:ef,onCancel:()=>ej(!1),onAddCredential:eU,existingCredential:ew,setIsCredentialModalOpen:ej}):(0,t.jsx)(S.Z,{open:ef,onCancel:()=>ej(!1),title:"Using Existing Credential",children:(0,t.jsx)(n.Z,{children:$.dheera_ai_params.dheera_ai_credential_name})}),(0,t.jsx)(e4,{isVisible:eE,onCancel:()=>eF(!1),onSuccess:e=>{ex(e),ed&&ed(e)},modelData:eh||$,accessToken:et||"",userRole:er||""})]})}var e9=a(33293),e7=a(11318),le=a(8048),ll=a(41649);let la=e=>{let{provider:l,className:a="w-4 h-4"}=e,[s,r]=(0,o.useState)(!1),{logo:i}=(0,m.dr)(l);return s||!i?(0,t.jsx)("div",{className:"".concat(a," rounded-full bg-gray-200 flex items-center justify-center text-xs"),children:(null==l?void 0:l.charAt(0))||"-"}):(0,t.jsx)("img",{src:i,alt:"".concat(l," logo"),className:a,onError:()=>r(!0)})},lt=(e,l,a,s,r,i,n,o,d,c,m)=>[{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Model ID"}),accessorKey:"model_info.id",cell:e=>{let{row:l}=e,a=l.original;return(0,t.jsx)(A.Z,{title:a.model_info.id,children:(0,t.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>s(a.model_info.id),children:a.model_info.id})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Model Information"}),accessorKey:"model_name",size:250,cell:e=>{let{row:l}=e,a=l.original,s=i(l.original)||"-",r=(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Provider:"})," ",a.provider||"-"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Public Model Name:"})," ",s]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"DheeraAI Model Name:"})," ",a.dheera_ai_model_name||"-"]})]});return(0,t.jsx)(A.Z,{title:r,children:(0,t.jsxs)("div",{className:"flex items-start space-x-2 min-w-0 w-full max-w-[250px]",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:a.provider?(0,t.jsx)(la,{provider:a.provider}):(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"-"})}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate max-w-[210px]",children:s}),(0,t.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5 max-w-[210px]",children:a.dheera_ai_model_name||"-"})]})]})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Credentials"}),accessorKey:"dheera_ai_credential_name",size:180,cell:e=>{var l;let{row:a}=e,s=null===(l=a.original.dheera_ai_params)||void 0===l?void 0:l.dheera_ai_credential_name;return s?(0,t.jsx)(A.Z,{title:"Credential: ".concat(s),children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 max-w-[180px]",children:[(0,t.jsx)(eW.Z,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-xs truncate",title:s,children:s})]})}):(0,t.jsxs)("div",{className:"flex items-center space-x-2 max-w-[180px]",children:[(0,t.jsx)(eW.Z,{className:"w-4 h-4 text-gray-300 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"No credentials"})]})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Created By"}),accessorKey:"model_info.created_by",sortingFn:"datetime",size:160,cell:e=>{var l;let{row:a}=e,s=a.original,r=!(null===(l=s.model_info)||void 0===l?void 0:l.db_model),i=s.model_info.created_by,n=s.model_info.created_at?new Date(s.model_info.created_at).toLocaleDateString():null;return(0,t.jsxs)("div",{className:"flex flex-col min-w-0 max-w-[160px]",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate",title:r?"Defined in config":i||"Unknown",children:r?"Defined in config":i||"Unknown"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",title:r?"Config file":n||"Unknown date",children:r?"-":n||"Unknown date"})]})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Updated At"}),accessorKey:"model_info.updated_at",sortingFn:"datetime",cell:e=>{let{row:l}=e,a=l.original;return(0,t.jsx)("span",{className:"text-xs",children:a.model_info.updated_at?new Date(a.model_info.updated_at).toLocaleDateString():"-"})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Costs"}),accessorKey:"input_cost",size:120,cell:e=>{let{row:l}=e,a=l.original,s=a.input_cost,r=a.output_cost;return s||r?(0,t.jsx)(A.Z,{title:"Cost per 1M tokens",children:(0,t.jsxs)("div",{className:"flex flex-col min-w-0 max-w-[120px]",children:[s&&(0,t.jsxs)("div",{className:"text-xs font-medium text-gray-900 truncate",children:["In: $",s]}),r&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:["Out: $",r]})]})}):(0,t.jsx)("div",{className:"max-w-[120px]",children:(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Team ID"}),accessorKey:"model_info.team_id",cell:e=>{let{row:l}=e,a=l.original;return a.model_info.team_id?(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)(A.Z,{title:a.model_info.team_id,children:(0,t.jsxs)(eY.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>r(a.model_info.team_id),children:[a.model_info.team_id.slice(0,7),"..."]})})}):"-"}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Model Access Group"}),accessorKey:"model_info.model_access_group",enableSorting:!1,cell:e=>{let{row:l}=e,a=l.original,s=a.model_info.access_groups;if(!s||0===s.length)return"-";let r=a.model_info.id,i=c.has(r),n=s.length>1,o=()=>{let e=new Set(c);i?e.delete(r):e.add(r),m(e)};return(0,t.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,t.jsx)(ll.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:s[0]}),(i||!n&&2===s.length)&&s.slice(1).map((e,l)=>(0,t.jsx)(ll.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:e},l+1)),n&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"text-xs text-blue-600 hover:text-blue-800 px-1 py-0.5 rounded hover:bg-blue-50 h-5 leading-tight flex-shrink-0 whitespace-nowrap",children:i?"−":"+".concat(s.length-1)})]})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Status"}),accessorKey:"model_info.db_model",cell:e=>{let{row:l}=e,a=l.original;return(0,t.jsx)("div",{className:"\n          inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\n          ".concat(a.model_info.db_model?"bg-blue-50 text-blue-600":"bg-gray-100 text-gray-600","\n        "),children:a.model_info.db_model?"DB Model":"Config Model"})}},{id:"actions",header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Actions"}),cell:a=>{var r,i;let{row:n}=a,o=n.original,c="Admin"===e||(null===(r=o.model_info)||void 0===r?void 0:r.created_by)===l,m=!(null===(i=o.model_info)||void 0===i?void 0:i.db_model);return(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 pr-4",children:m?(0,t.jsx)(A.Z,{title:"Config model cannot be deleted on the dashboard. Please delete it from the config file.",children:(0,t.jsx)($.Z,{icon:y.Z,size:"sm",className:"opacity-50 cursor-not-allowed"})}):(0,t.jsx)(A.Z,{title:"Delete model",children:(0,t.jsx)($.Z,{icon:y.Z,size:"sm",onClick:()=>{c&&(s(o.model_info.id),d(!1))},className:c?"cursor-pointer hover:text-red-600":"opacity-50 cursor-not-allowed"})})})}}];var ls=a(27281),lr=a(57365),li=e=>{let{selectedModelGroup:l,setSelectedModelGroup:a,availableModelGroups:s,availableModelAccessGroups:r,setSelectedModelId:d,setSelectedTeamId:c,setEditModel:m,modelData:u}=e,{userId:h,userRole:x,premiumUser:p}=(0,K.Z)(),{teams:g}=(0,e7.Z)(),[f,j]=(0,o.useState)(""),[_,v]=(0,o.useState)("current_team"),[y,b]=(0,o.useState)("personal"),[N,Z]=(0,o.useState)(!1),[w,C]=(0,o.useState)(null),[S,k]=(0,o.useState)(new Set),[A,I]=(0,o.useState)({pageIndex:0,pageSize:50}),E=(0,o.useRef)(null),F=(0,o.useMemo)(()=>u&&u.data&&0!==u.data.length?u.data.filter(e=>{var a,t,s,r,i,n;let o=""===f||e.model_name.toLowerCase().includes(f.toLowerCase()),d="all"===l||e.model_name===l||!l||"wildcard"===l&&(null===(a=e.model_name)||void 0===a?void 0:a.includes("*")),c="all"===w||(null===(t=e.model_info.access_groups)||void 0===t?void 0:t.includes(w))||!w,m=!0;if("current_team"===_){if("personal"===y)m=(null===(s=e.model_info)||void 0===s?void 0:s.direct_access)===!0;else{let l=(null===(i=e.model_info)||void 0===i?void 0:null===(r=i.access_via_team_ids)||void 0===r?void 0:r.includes(y.team_id))===!0,a=(null===(n=y.models)||void 0===n?void 0:n.some(l=>{var a,t;return null===(t=e.model_info)||void 0===t?void 0:null===(a=t.access_groups)||void 0===a?void 0:a.includes(l)}))===!0;m=l||a}}return o&&d&&c&&m}):[],[u,f,l,w,y,_]),P=(0,o.useMemo)(()=>{let e=A.pageIndex*A.pageSize,l=e+A.pageSize;return F.slice(e,l)},[F,A.pageIndex,A.pageSize]);return(0,o.useEffect)(()=>{I(e=>({...e,pageIndex:0}))},[f,l,w,y,_]),(0,t.jsx)(el.Z,{children:(0,t.jsx)(i.Z,{children:(0,t.jsx)("div",{className:"flex flex-col space-y-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"border-b px-6 py-4 bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900",children:"Current Team:"}),(0,t.jsxs)(ls.Z,{className:"w-80",defaultValue:"personal",value:"personal"===y?"personal":y.team_id,onValueChange:e=>{if("personal"===e)b("personal");else{let l=null==g?void 0:g.find(l=>l.team_id===e);l&&b(l)}},children:[(0,t.jsx)(lr.Z,{value:"personal",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium",children:"Personal"})]})}),null==g?void 0:g.filter(e=>e.team_id).map(e=>(0,t.jsx)(lr.Z,{value:e.team_id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium",children:e.team_alias?"".concat(e.team_alias.slice(0,30),"..."):"Team ".concat(e.team_id.slice(0,30),"...")})]})},e.team_id))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900",children:"View:"}),(0,t.jsxs)(ls.Z,{className:"w-64",defaultValue:"current_team",value:_,onValueChange:e=>v(e),children:[(0,t.jsx)(lr.Z,{value:"current_team",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium",children:"Current Team Models"})]})}),(0,t.jsx)(lr.Z,{value:"all",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium",children:"All Available Models"})]})})]})]})]}),"current_team"===_&&(0,t.jsxs)("div",{className:"flex items-start gap-2 mt-3",children:[(0,t.jsx)(eu.Z,{className:"text-gray-400 mt-0.5 flex-shrink-0 text-xs"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"personal"===y?(0,t.jsxs)("span",{children:["To access these models: Create a Virtual Key without selecting a team on the"," ",(0,t.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]}):(0,t.jsxs)("span",{children:['To access these models: Create a Virtual Key and select Team as "',"string"!=typeof y?y.team_alias||y.team_id:"",'" on the'," ",(0,t.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]})})]})]}),(0,t.jsx)("div",{className:"border-b px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search model names...",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:f,onChange:e=>j(e.target.value)}),(0,t.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,t.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ".concat(N?"bg-gray-100":""),onClick:()=>Z(!N),children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),(0,t.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{j(""),a("all"),C(null),b("personal"),v("current_team"),I({pageIndex:0,pageSize:50})},children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}),N&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,t.jsx)("div",{className:"w-64",children:(0,t.jsxs)(ls.Z,{value:null!=l?l:"all",onValueChange:e=>a("all"===e?"all":e),placeholder:"Filter by Public Model Name",children:[(0,t.jsx)(lr.Z,{value:"all",children:"All Models"}),(0,t.jsx)(lr.Z,{value:"wildcard",children:"Wildcard Models (*)"}),s.map((e,l)=>(0,t.jsx)(lr.Z,{value:e,children:e},l))]})}),(0,t.jsx)("div",{className:"w-64",children:(0,t.jsxs)(ls.Z,{value:null!=w?w:"all",onValueChange:e=>C("all"===e?null:e),placeholder:"Filter by Model Access Group",children:[(0,t.jsx)(lr.Z,{value:"all",children:"All Model Access Groups"}),r.map((e,l)=>(0,t.jsx)(lr.Z,{value:e,children:e},l))]})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700",children:F.length>0?"Showing ".concat(A.pageIndex*A.pageSize+1," - ").concat(Math.min((A.pageIndex+1)*A.pageSize,F.length)," of ").concat(F.length," results"):"Showing 0 results"}),F.length>A.pageSize&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>I(e=>({...e,pageIndex:e.pageIndex-1})),disabled:0===A.pageIndex,className:"px-3 py-1 text-sm border rounded-md ".concat(0===A.pageIndex?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Previous"}),(0,t.jsx)("button",{onClick:()=>I(e=>({...e,pageIndex:e.pageIndex+1})),disabled:A.pageIndex>=Math.ceil(F.length/A.pageSize)-1,className:"px-3 py-1 text-sm border rounded-md ".concat(A.pageIndex>=Math.ceil(F.length/A.pageSize)-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Next"})]})]})]})}),(0,t.jsx)(le.C,{columns:lt(x,h,p,d,c,W,()=>{},()=>{},m,S,k),data:P,isLoading:!1,table:E})]})})})})},ln=a(75105),lo=a(40278),ld=a(97765),lc=a(21626),lm=a(97214),lu=a(28241),lh=a(58834),lx=a(69552),lp=a(71876),lg=a(39789),lf=a(79326),lj=a(2356),l_=a(59664),lv=e=>{let{modelMetrics:l,modelMetricsCategories:a,customTooltip:s,premiumUser:r}=e;return(0,t.jsx)(l_.Z,{title:"Time to First token (s)",className:"h-72",data:l,index:"date",showLegend:!1,categories:a,colors:["indigo","rose"],connectNulls:!0,customTooltip:s})},ly=e=>{let{setSelectedAPIKey:l,keys:a,teams:s,setSelectedCustomer:r,allEndUsers:i}=e,{premiumUser:d}=(0,K.Z)(),[c,m]=(0,o.useState)(null);return(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"mb-1",children:"Select API Key Name"}),d?(0,t.jsxs)("div",{children:[(0,t.jsxs)(ls.Z,{defaultValue:"all-keys",children:[(0,t.jsx)(lr.Z,{value:"all-keys",onClick:()=>{l(null)},children:"All Keys"},"all-keys"),null==a?void 0:a.map((e,a)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,t.jsx)(lr.Z,{value:String(a),onClick:()=>{l(e)},children:e.key_alias},a):null)]}),(0,t.jsx)(n.Z,{className:"mt-1",children:"Select Customer Name"}),(0,t.jsxs)(ls.Z,{defaultValue:"all-customers",children:[(0,t.jsx)(lr.Z,{value:"all-customers",onClick:()=>{r(null)},children:"All Customers"},"all-customers"),null==i?void 0:i.map((e,l)=>(0,t.jsx)(lr.Z,{value:e,onClick:()=>{r(e)},children:e},l))]}),(0,t.jsx)(n.Z,{className:"mt-1",children:"Select Team"}),(0,t.jsxs)(ls.Z,{className:"w-64 relative z-50",defaultValue:"all",value:null!=c?c:"all",onValueChange:e=>m("all"===e?null:e),children:[(0,t.jsx)(lr.Z,{value:"all",children:"All Teams"}),null==s?void 0:s.filter(e=>e.team_id).map(e=>(0,t.jsx)(lr.Z,{value:e.team_id,children:e.team_alias?"".concat(e.team_alias," (").concat(e.team_id.slice(0,8),"...)"):"Team ".concat(e.team_id.slice(0,8),"...")},e.team_id))]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"mt-1",children:"Select Team"}),(0,t.jsxs)(ls.Z,{className:"w-64 relative z-50",defaultValue:"all",value:null!=c?c:"all",onValueChange:e=>m("all"===e?null:e),children:[(0,t.jsx)(lr.Z,{value:"all",children:"All Teams"}),null==s?void 0:s.filter(e=>e.team_id).map(e=>(0,t.jsx)(lr.Z,{value:e.team_id,children:e.team_alias?"".concat(e.team_alias," (").concat(e.team_id.slice(0,8),"...)"):"Team ".concat(e.team_id.slice(0,8),"...")},e.team_id))]})]})]})},lb=e=>{let{dateValue:l,setDateValue:a,selectedModelGroup:s,availableModelGroups:d,setShowAdvancedFilters:m,modelMetrics:u,modelMetricsCategories:h,streamingModelMetrics:x,streamingModelMetricsCategories:p,customTooltip:g,slowResponsesData:f,modelExceptions:j,globalExceptionData:_,allExceptions:v,globalExceptionPerDeployment:y,setSelectedAPIKey:b,keys:N,setSelectedCustomer:Z,teams:w,allEndUsers:C,selectedAPIKey:S,selectedCustomer:k,selectedTeam:A,setSelectedModelGroup:I,setModelMetrics:E,setModelMetricsCategories:F,setStreamingModelMetrics:P,setStreamingModelMetricsCategories:M,setSlowResponsesData:T,setModelExceptions:R,setAllExceptions:D,setGlobalExceptionData:O,setGlobalExceptionPerDeployment:L}=e,{accessToken:V,userId:z,userRole:q,premiumUser:B}=(0,K.Z)();(0,o.useEffect)(()=>{U(s,l.from,l.to)},[S,k,A]);let U=async(e,l,a)=>{if(console.log("Updating model metrics for group:",e),!V||!z||!q||!l||!a)return;console.log("inside updateModelMetrics - startTime:",l,"endTime:",a),I(e);let t=null==S?void 0:S.token;void 0===t&&(t=null);let s=k;void 0===s&&(s=null);try{let r=await (0,c.modelMetricsCall)(V,z,q,e,l.toISOString(),a.toISOString(),t,s);console.log("Model metrics response:",r),E(r.data),F(r.all_api_bases);let i=await (0,c.streamingModelMetricsCall)(V,e,l.toISOString(),a.toISOString());P(i.data),M(i.all_api_bases);let n=await (0,c.modelExceptionsCall)(V,z,q,e,l.toISOString(),a.toISOString(),t,s);console.log("Model exceptions response:",n),R(n.data),D(n.exception_types);let o=await (0,c.modelMetricsSlowResponsesCall)(V,z,q,e,l.toISOString(),a.toISOString(),t,s);if(console.log("slowResponses:",o),T(o),e){let t=await (0,c.adminGlobalActivityExceptions)(V,null==l?void 0:l.toISOString().split("T")[0],null==a?void 0:a.toISOString().split("T")[0],e);O(t);let s=await (0,c.adminGlobalActivityExceptionsPerDeployment)(V,null==l?void 0:l.toISOString().split("T")[0],null==a?void 0:a.toISOString().split("T")[0],e);L(s)}}catch(e){console.error("Failed to fetch model metrics",e)}};return(0,t.jsxs)(el.Z,{children:[(0,t.jsx)("div",{className:"mb-4 rounded-md border border-red-500 bg-red-50 p-4",children:(0,t.jsx)(n.Z,{className:"font-semibold text-red-700",children:"This page is deprecated and will be removed in the future. Some functionality may not work as expected."})}),(0,t.jsxs)(i.Z,{numItems:4,className:"mt-2 mb-2",children:[(0,t.jsx)(r.Z,{children:(0,t.jsx)(lg.Z,{value:l,className:"mr-2",onValueChange:e=>{a(e),U(s,e.from,e.to)}})}),(0,t.jsxs)(r.Z,{className:"ml-2",children:[(0,t.jsx)(n.Z,{children:"Select Model Group"}),(0,t.jsx)(ls.Z,{defaultValue:s||d[0],value:s||d[0],children:d.map((e,a)=>(0,t.jsx)(lr.Z,{value:e,onClick:()=>U(e,l.from,l.to),children:e},a))})]}),(0,t.jsx)(r.Z,{children:(0,t.jsx)(lf.Z,{trigger:"click",content:(0,t.jsx)(ly,{allEndUsers:C,keys:N,setSelectedAPIKey:b,setSelectedCustomer:Z,teams:w}),overlayStyle:{width:"20vw"},children:(0,t.jsx)(eY.Z,{icon:lj.Z,size:"md",variant:"secondary",className:"mt-4 ml-2",style:{border:"none"},onClick:()=>m(!0)})})})]}),(0,t.jsxs)(i.Z,{numItems:2,children:[(0,t.jsx)(r.Z,{children:(0,t.jsx)(e$.Z,{className:"mr-2 max-h-[400px] min-h-[400px]",children:(0,t.jsxs)(X.Z,{children:[(0,t.jsxs)(ee.Z,{variant:"line",defaultValue:"1",children:[(0,t.jsx)(Q.Z,{value:"1",children:"Avg. Latency per Token"}),(0,t.jsx)(Q.Z,{value:"2",children:"Time to first token"})]}),(0,t.jsxs)(ea.Z,{children:[(0,t.jsxs)(el.Z,{children:[(0,t.jsx)("p",{className:"text-gray-500 italic",children:" (seconds/token)"}),(0,t.jsx)(n.Z,{className:"text-gray-500 italic mt-1 mb-1",children:"average Latency for successfull requests divided by the total tokens"}),u&&h&&(0,t.jsx)(ln.Z,{title:"Model Latency",className:"h-72",data:u,showLegend:!1,index:"date",categories:h,connectNulls:!0,customTooltip:g})]}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(lv,{modelMetrics:x,modelMetricsCategories:p,customTooltip:g,premiumUser:B})})]})]})})}),(0,t.jsx)(r.Z,{children:(0,t.jsx)(e$.Z,{className:"ml-2 max-h-[400px] min-h-[400px]  overflow-y-auto",children:(0,t.jsxs)(lc.Z,{children:[(0,t.jsx)(lh.Z,{children:(0,t.jsxs)(lp.Z,{children:[(0,t.jsx)(lx.Z,{children:"Deployment"}),(0,t.jsx)(lx.Z,{children:"Success Responses"}),(0,t.jsxs)(lx.Z,{children:["Slow Responses ",(0,t.jsx)("p",{children:"Success Responses taking 600+s"})]})]})}),(0,t.jsx)(lm.Z,{children:f.map((e,l)=>(0,t.jsxs)(lp.Z,{children:[(0,t.jsx)(lu.Z,{children:e.api_base}),(0,t.jsx)(lu.Z,{children:e.total_count}),(0,t.jsx)(lu.Z,{children:e.slow_count})]},l))})]})})})]}),(0,t.jsx)(i.Z,{numItems:1,className:"gap-2 w-full mt-2",children:(0,t.jsxs)(e$.Z,{children:[(0,t.jsxs)(eX.Z,{children:["All Exceptions for ",s]}),(0,t.jsx)(lo.Z,{className:"h-60",data:j,index:"model",categories:v,stack:!0,yAxisWidth:30})]})}),(0,t.jsxs)(i.Z,{numItems:1,className:"gap-2 w-full mt-2",children:[(0,t.jsxs)(e$.Z,{children:[(0,t.jsxs)(eX.Z,{children:["All Up Rate Limit Errors (429) for ",s]}),(0,t.jsxs)(i.Z,{numItems:1,children:[(0,t.jsxs)(r.Z,{children:[(0,t.jsxs)(ld.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",_.sum_num_rate_limit_exceptions]}),(0,t.jsx)(lo.Z,{className:"h-40",data:_.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]}),(0,t.jsx)(r.Z,{})]})]}),B?(0,t.jsx)(t.Fragment,{children:y.map((e,l)=>(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(eX.Z,{children:e.api_base?e.api_base:"Unknown API Base"}),(0,t.jsx)(i.Z,{numItems:1,children:(0,t.jsxs)(r.Z,{children:[(0,t.jsxs)(ld.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors (429) ",e.sum_num_rate_limit_exceptions]}),(0,t.jsx)(lo.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]},l))}):(0,t.jsx)(t.Fragment,{children:y&&y.length>0&&y.slice(0,1).map((e,l)=>(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(eX.Z,{children:"✨ Rate Limit Errors by Deployment"}),(0,t.jsx)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:"Upgrade to see exceptions for all deployments"}),(0,t.jsx)(eY.Z,{variant:"primary",className:"mb-2",children:(0,t.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})}),(0,t.jsxs)(e$.Z,{children:[(0,t.jsx)(eX.Z,{children:e.api_base}),(0,t.jsx)(i.Z,{numItems:1,children:(0,t.jsxs)(r.Z,{children:[(0,t.jsxs)(ld.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",e.sum_num_rate_limit_exceptions]}),(0,t.jsx)(lo.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]})]},l))})]})]})};let lN={"BadRequestError (400)":"BadRequestErrorRetries","AuthenticationError  (401)":"AuthenticationErrorRetries","TimeoutError (408)":"TimeoutErrorRetries","RateLimitError (429)":"RateLimitErrorRetries","ContentPolicyViolationError (400)":"ContentPolicyViolationErrorRetries","InternalServerError (500)":"InternalServerErrorRetries"};var lZ=e=>{let{selectedModelGroup:l,setSelectedModelGroup:a,availableModelGroups:s,globalRetryPolicy:r,setGlobalRetryPolicy:i,defaultRetry:o,modelGroupRetryPolicy:d,setModelGroupRetryPolicy:c,handleSaveRetrySettings:m}=e;return(0,t.jsxs)(el.Z,{children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(n.Z,{children:"Retry Policy Scope:"}),(0,t.jsxs)(ls.Z,{className:"ml-2 w-48",defaultValue:"global",value:"global"===l?"global":l||s[0],onValueChange:e=>a(e),children:[(0,t.jsx)(lr.Z,{value:"global",children:"Global Default"}),s.map((e,l)=>(0,t.jsx)(lr.Z,{value:e,onClick:()=>a(e),children:e},l))]})]})}),"global"===l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eX.Z,{children:"Global Retry Policy"}),(0,t.jsx)(n.Z,{className:"mb-6",children:"Default retry settings applied to all model groups unless overridden"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(eX.Z,{children:["Retry Policy for ",l]}),(0,t.jsx)(n.Z,{className:"mb-6",children:"Model-specific retry settings. Falls back to global defaults if not set."})]}),lN&&(0,t.jsx)("table",{children:(0,t.jsx)("tbody",{children:Object.entries(lN).map((e,a)=>{var s,m,u,h;let x,[p,g]=e;if("global"===l)x=null!==(s=null==r?void 0:r[g])&&void 0!==s?s:o;else{let e=null==d?void 0:null===(m=d[l])||void 0===m?void 0:m[g];x=null!=e?e:null!==(u=null==r?void 0:r[g])&&void 0!==u?u:o}return(0,t.jsxs)("tr",{className:"flex justify-between items-center mt-2",children:[(0,t.jsxs)("td",{children:[(0,t.jsx)(n.Z,{children:p}),"global"!==l&&(0,t.jsxs)(n.Z,{className:"text-xs text-gray-500 ml-2",children:["(Global: ",null!==(h=null==r?void 0:r[g])&&void 0!==h?h:o,")"]})]}),(0,t.jsx)("td",{children:(0,t.jsx)(ej.Z,{className:"ml-5",value:x,min:0,step:1,onChange:e=>{"global"===l?i(l=>null==e?l:{...null!=l?l:{},[g]:e}):c(a=>{var t;let s=null!==(t=null==a?void 0:a[l])&&void 0!==t?t:{};return{...null!=a?a:{},[l]:{...s,[g]:e}}})}})})]},a)})})}),(0,t.jsx)(eY.Z,{className:"mt-6 mr-8",onClick:m,children:"Save"})]})},lw=a(58760),lC=a(867),lS=a(3810),lk=a(89245),lA=a(5540),lI=a(8881);let{Text:lE}=C.default;var lF=e=>{let{accessToken:l,onReloadSuccess:a,buttonText:s="Reload Price Data",showIcon:r=!0,size:i="middle",type:n="primary",className:m=""}=e,[u,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[j,_]=(0,o.useState)(!1),[v,y]=(0,o.useState)(6),[b,N]=(0,o.useState)(null),[Z,w]=(0,o.useState)(!1);(0,o.useEffect)(()=>{C();let e=setInterval(()=>{C()},3e4);return()=>clearInterval(e)},[l]);let C=async()=>{if(l){w(!0);try{console.log("Fetching reload status...");let e=await (0,c.getModelCostMapReloadStatus)(l);console.log("Received status:",e),N(e)}catch(e){console.error("Failed to fetch reload status:",e),N({scheduled:!1,interval_hours:null,last_run:null,next_run:null})}finally{w(!1)}}},k=async()=>{if(!l){d.Z.fromBackend("No access token available");return}h(!0);try{let e=await (0,c.reloadModelCostMap)(l);"success"===e.status?(d.Z.success("Price data reloaded successfully! ".concat(e.models_count||0," models updated.")),null==a||a(),await C()):d.Z.fromBackend("Failed to reload price data")}catch(e){console.error("Error reloading price data:",e),d.Z.fromBackend("Failed to reload price data. Please try again.")}finally{h(!1)}},A=async()=>{if(!l){d.Z.fromBackend("No access token available");return}if(v<=0){d.Z.fromBackend("Hours must be greater than 0");return}p(!0);try{let e=await (0,c.scheduleModelCostMapReload)(l,v);"success"===e.status?(d.Z.success("Periodic reload scheduled for every ".concat(v," hours")),_(!1),await C()):d.Z.fromBackend("Failed to schedule periodic reload")}catch(e){console.error("Error scheduling reload:",e),d.Z.fromBackend("Failed to schedule periodic reload. Please try again.")}finally{p(!1)}},E=async()=>{if(!l){d.Z.fromBackend("No access token available");return}f(!0);try{let e=await (0,c.cancelModelCostMapReload)(l);"success"===e.status?(d.Z.success("Periodic reload cancelled successfully"),await C()):d.Z.fromBackend("Failed to cancel periodic reload")}catch(e){console.error("Error cancelling reload:",e),d.Z.fromBackend("Failed to cancel periodic reload. Please try again.")}finally{f(!1)}},F=e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(l){return e}};return(0,t.jsxs)("div",{className:m,children:[(0,t.jsxs)(lw.Z,{direction:"horizontal",size:"middle",style:{marginBottom:16},children:[(0,t.jsx)(lC.Z,{title:"Hard Refresh Price Data",description:"This will immediately fetch the latest pricing information from the remote source. Continue?",onConfirm:k,okText:"Yes",cancelText:"No",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"}},children:(0,t.jsx)(I.ZP,{type:n,size:i,loading:u,icon:r?(0,t.jsx)(lk.Z,{}):void 0,style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"},children:s})}),(null==b?void 0:b.scheduled)?(0,t.jsx)(I.ZP,{type:"default",size:i,danger:!0,icon:(0,t.jsx)(lI.Z,{}),loading:g,onClick:E,style:{borderColor:"#ff4d4f",color:"#ff4d4f",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Cancel Periodic Reload"}):(0,t.jsx)(I.ZP,{type:"default",size:i,icon:(0,t.jsx)(lA.Z,{}),onClick:()=>_(!0),style:{borderColor:"#d9d9d9",color:"#6366f1",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Set Up Periodic Reload"})]}),b&&(0,t.jsx)(er.Z,{size:"small",style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8},children:(0,t.jsxs)(lw.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[b.scheduled?(0,t.jsx)("div",{children:(0,t.jsxs)(lS.Z,{color:"green",icon:(0,t.jsx)(lA.Z,{}),children:["Scheduled every ",b.interval_hours," hours"]})}):(0,t.jsx)(lE,{type:"secondary",children:"No periodic reload scheduled"}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(lE,{type:"secondary",style:{fontSize:"12px"},children:"Last run:"}),(0,t.jsx)(lE,{style:{fontSize:"12px"},children:F(b.last_run)})]}),b.scheduled&&(0,t.jsxs)(t.Fragment,{children:[b.next_run&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(lE,{type:"secondary",style:{fontSize:"12px"},children:"Next run:"}),(0,t.jsx)(lE,{style:{fontSize:"12px"},children:F(b.next_run)})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(lE,{type:"secondary",style:{fontSize:"12px"},children:"Status:"}),(0,t.jsx)(lS.Z,{color:(null==b?void 0:b.scheduled)?b.last_run?"success":"processing":"default",children:(null==b?void 0:b.scheduled)?b.last_run?"Active":"Ready":"Not scheduled"})]})]})]})}),(0,t.jsxs)(S.Z,{title:"Set Up Periodic Reload",open:j,onOk:A,onCancel:()=>_(!1),confirmLoading:x,okText:"Schedule",cancelText:"Cancel",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"}},children:[(0,t.jsx)("div",{style:{marginBottom:16},children:(0,t.jsx)(lE,{children:"Set up automatic reload of price data every:"})}),(0,t.jsx)("div",{style:{marginBottom:16},children:(0,t.jsx)(ej.Z,{min:1,max:168,value:v,onChange:e=>y(e||6),addonAfter:"hours",style:{width:"100%"}})}),(0,t.jsx)("div",{children:(0,t.jsxs)(lE,{type:"secondary",children:["This will automatically fetch the latest pricing data from the remote source every ",v," hours."]})})]})]})},lP=e=>{let{setModelMap:l}=e,{accessToken:a}=(0,K.Z)();return(0,t.jsx)(el.Z,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(eX.Z,{children:"Price Data Management"}),(0,t.jsx)(n.Z,{className:"text-tremor-content",children:"Manage model pricing data and configure automatic reload schedules"})]}),(0,t.jsx)(lF,{accessToken:a,onReloadSuccess:()=>{(async()=>{l(await (0,c.modelCostMap)())})()},buttonText:"Reload Price Data",size:"middle",type:"primary",className:"w-full"})]})})},lM=a(55584),lT=a(61994),lR=a(15731),lD=a(91126);let lO=(e,l,a,s,r,i,n,o,d,c,m)=>[{header:()=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lT.Z,{checked:a,indeterminate:l.length>0&&!a,onChange:e=>r(e.target.checked),onClick:e=>e.stopPropagation()}),(0,t.jsx)("span",{children:"Model ID"})]}),accessorKey:"model_info.id",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{let{row:a}=e,r=a.original,i=r.model_name,n=l.includes(i);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lT.Z,{checked:n,onChange:e=>s(i,e.target.checked),onClick:e=>e.stopPropagation()}),(0,t.jsx)(A.Z,{title:r.model_info.id,children:(0,t.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>m&&m(r.model_info.id),children:r.model_info.id})})]})}},{header:"Model Name",accessorKey:"model_name",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{let{row:l}=e,a=l.original,s=o(a)||a.model_name;return(0,t.jsx)("div",{className:"font-medium text-sm",children:(0,t.jsx)(A.Z,{title:s,children:(0,t.jsx)("div",{className:"truncate max-w-[200px]",children:s})})})}},{header:"Health Status",accessorKey:"health_status",enableSorting:!0,sortingFn:(e,l,a)=>{var t,s;let r=e.getValue("health_status")||"unknown",i=l.getValue("health_status")||"unknown",n={healthy:0,checking:1,unknown:2,unhealthy:3};return(null!==(t=n[r])&&void 0!==t?t:4)-(null!==(s=n[i])&&void 0!==s?s:4)},cell:l=>{var a;let{row:s}=l,r=s.original,i={status:r.health_status,loading:r.health_loading,error:r.health_error};if(i.loading)return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),(0,t.jsx)(eb.x,{className:"text-gray-600 text-sm",children:"Checking..."})]});let o=r.model_name,d="healthy"===i.status&&(null===(a=e[o])||void 0===a?void 0:a.successResponse);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[n(i.status),d&&c&&(0,t.jsx)(A.Z,{title:"View response details",placement:"top",children:(0,t.jsx)("button",{onClick:()=>{var l;return c(o,null===(l=e[o])||void 0===l?void 0:l.successResponse)},className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded cursor-pointer transition-colors",children:(0,t.jsx)(lR.Z,{className:"h-4 w-4"})})})]})}},{header:"Error Details",accessorKey:"health_error",enableSorting:!1,cell:l=>{let{row:a}=l,s=a.original.model_name,r=e[s];if(!(null==r?void 0:r.error))return(0,t.jsx)(eb.x,{className:"text-gray-400 text-sm",children:"No errors"});let i=r.error,n=r.fullError||r.error;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"max-w-[200px]",children:(0,t.jsx)(A.Z,{title:i,placement:"top",children:(0,t.jsx)(eb.x,{className:"text-red-600 text-sm truncate",children:i})})}),d&&n!==i&&(0,t.jsx)(A.Z,{title:"View full error details",placement:"top",children:(0,t.jsx)("button",{onClick:()=>d(s,i,n),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded cursor-pointer transition-colors",children:(0,t.jsx)(lR.Z,{className:"h-4 w-4"})})})]})}},{header:"Last Check",accessorKey:"last_check",enableSorting:!0,sortingFn:(e,l,a)=>{let t=e.getValue("last_check")||"Never checked",s=l.getValue("last_check")||"Never checked";if("Never checked"===t&&"Never checked"===s)return 0;if("Never checked"===t)return 1;if("Never checked"===s)return -1;if("Check in progress..."===t&&"Check in progress..."===s)return 0;if("Check in progress..."===t)return -1;if("Check in progress..."===s)return 1;let r=new Date(t),i=new Date(s);return isNaN(r.getTime())&&isNaN(i.getTime())?0:isNaN(r.getTime())?1:isNaN(i.getTime())?-1:i.getTime()-r.getTime()},cell:e=>{let{row:l}=e,a=l.original;return(0,t.jsx)(eb.x,{className:"text-gray-600 text-sm",children:a.health_loading?"Check in progress...":a.last_check})}},{header:"Last Success",accessorKey:"last_success",enableSorting:!0,sortingFn:(e,l,a)=>{let t=e.getValue("last_success")||"Never succeeded",s=l.getValue("last_success")||"Never succeeded";if("Never succeeded"===t&&"Never succeeded"===s)return 0;if("Never succeeded"===t)return 1;if("Never succeeded"===s)return -1;if("None"===t&&"None"===s)return 0;if("None"===t)return 1;if("None"===s)return -1;let r=new Date(t),i=new Date(s);return isNaN(r.getTime())&&isNaN(i.getTime())?0:isNaN(r.getTime())?1:isNaN(i.getTime())?-1:i.getTime()-r.getTime()},cell:l=>{let{row:a}=l,s=e[a.original.model_name],r=(null==s?void 0:s.lastSuccess)||"None";return(0,t.jsx)(eb.x,{className:"text-gray-600 text-sm",children:r})}},{header:"Actions",id:"actions",cell:e=>{let{row:l}=e,a=l.original,s=a.model_name,r=a.health_status&&"none"!==a.health_status,n=a.health_loading?"Checking...":r?"Re-run Health Check":"Run Health Check";return(0,t.jsx)(A.Z,{title:n,placement:"top",children:(0,t.jsx)("button",{className:"p-2 rounded-md transition-colors ".concat(a.health_loading?"text-gray-400 cursor-not-allowed bg-gray-100":"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50"),onClick:()=>{a.health_loading||i(s)},disabled:a.health_loading,children:a.health_loading?(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):r?(0,t.jsx)(Y.Z,{className:"h-4 w-4"}):(0,t.jsx)(lD.Z,{className:"h-4 w-4"})})})},enableSorting:!1}],lL=[{pattern:/Missing .* API Key/i,replacement:"Missing API Key"},{pattern:/Connection timeout/i,replacement:"Connection timeout"},{pattern:/Network.*not.*ok/i,replacement:"Network connection failed"},{pattern:/403.*Forbidden/i,replacement:"Access forbidden - check API key permissions"},{pattern:/401.*Unauthorized/i,replacement:"Unauthorized - invalid API key"},{pattern:/429.*rate limit/i,replacement:"Rate limit exceeded"},{pattern:/500.*Internal Server Error/i,replacement:"Provider internal server error"},{pattern:/dheera_ai\.AuthenticationError/i,replacement:"Authentication failed"},{pattern:/dheera_ai\.RateLimitError/i,replacement:"Rate limit exceeded"},{pattern:/dheera_ai\.APIError/i,replacement:"API error"}];var lV=e=>{let{accessToken:l,modelData:a,all_models_on_proxy:s,getDisplayModelName:r,setSelectedModelId:i}=e,[d,m]=(0,o.useState)({}),[u,h]=(0,o.useState)([]),[x,p]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[j,_]=(0,o.useState)(null),[v,y]=(0,o.useState)(!1),[b,N]=(0,o.useState)(null),Z=(0,o.useRef)(null);(0,o.useEffect)(()=>{l&&(null==a?void 0:a.data)&&(async()=>{let e={};a.data.forEach(l=>{e[l.model_name]={status:"none",lastCheck:"None",lastSuccess:"None",loading:!1,error:void 0,fullError:void 0,successResponse:void 0}});try{let t=await (0,c.latestHealthChecksCall)(l);t&&t.latest_health_checks&&"object"==typeof t.latest_health_checks&&Object.entries(t.latest_health_checks).forEach(l=>{let[t,s]=l;if(!s)return;let r=null,i=a.data.find(e=>e.model_name===t);if(i)r=i.model_name;else{let e=a.data.find(e=>e.model_info&&e.model_info.id===t);if(e)r=e.model_name;else if(s.model_name){let e=a.data.find(e=>e.model_name===s.model_name);e&&(r=e.model_name)}}if(r){let l=s.error_message||void 0;e[r]={status:s.status||"unknown",lastCheck:s.checked_at?new Date(s.checked_at).toLocaleString():"None",lastSuccess:"healthy"===s.status&&s.checked_at?new Date(s.checked_at).toLocaleString():"None",loading:!1,error:l?w(l):void 0,fullError:l,successResponse:"healthy"===s.status?s:void 0}}})}catch(e){console.warn("Failed to load health check history (using default states):",e)}m(e)})()},[l,a]);let w=e=>{var l;if(!e)return"Health check failed";let a="string"==typeof e?e:JSON.stringify(e),t=a.match(/(\w+Error):\s*(\d{3})/i);if(t)return"".concat(t[1],": ").concat(t[2]);let s=a.match(/(AuthenticationError|RateLimitError|BadRequestError|InternalServerError|TimeoutError|NotFoundError|ForbiddenError|ServiceUnavailableError|BadGatewayError|ContentPolicyViolationError|\w+Error)/i),r=a.match(/\b(400|401|403|404|408|429|500|502|503|504)\b/);if(s&&r)return"".concat(s[1],": ").concat(r[1]);if(r){let e=r[1];return"".concat({400:"BadRequestError",401:"AuthenticationError",403:"ForbiddenError",404:"NotFoundError",408:"TimeoutError",429:"RateLimitError",500:"InternalServerError",502:"BadGatewayError",503:"ServiceUnavailableError",504:"GatewayTimeoutError"}[e],": ").concat(e)}if(s){let e=s[1],l={AuthenticationError:"401",RateLimitError:"429",BadRequestError:"400",InternalServerError:"500",TimeoutError:"408",NotFoundError:"404",ForbiddenError:"403",ServiceUnavailableError:"503",BadGatewayError:"502",GatewayTimeoutError:"504",ContentPolicyViolationError:"400"}[e];return l?"".concat(e,": ").concat(l):e}for(let{pattern:e,replacement:l}of lL)if(e.test(a))return l;if(/missing.*api.*key|invalid.*key|unauthorized/i.test(a))return"AuthenticationError: 401";if(/rate.*limit|too.*many.*requests/i.test(a))return"RateLimitError: 429";if(/timeout|timed.*out/i.test(a))return"TimeoutError: 408";if(/not.*found/i.test(a))return"NotFoundError: 404";if(/forbidden|access.*denied/i.test(a))return"ForbiddenError: 403";if(/internal.*server.*error/i.test(a))return"InternalServerError: 500";let i=a.replace(/[\n\r]+/g," ").replace(/\s+/g," ").trim(),n=null===(l=i.split(/[.!?]/)[0])||void 0===l?void 0:l.trim();return n&&n.length>0?n.length>100?n.substring(0,97)+"...":n:i.length>100?i.substring(0,97)+"...":i},C=async e=>{if(l){m(l=>({...l,[e]:{...l[e],loading:!0,status:"checking"}}));try{var t,s;let r=await (0,c.individualModelHealthCheckCall)(l,e),i=new Date().toLocaleString();if(r.unhealthy_count>0&&r.unhealthy_endpoints&&r.unhealthy_endpoints.length>0){let l=(null===(t=r.unhealthy_endpoints[0])||void 0===t?void 0:t.error)||"Health check failed",a=w(l);m(t=>{var s;return{...t,[e]:{status:"unhealthy",lastCheck:i,lastSuccess:(null===(s=t[e])||void 0===s?void 0:s.lastSuccess)||"None",loading:!1,error:a,fullError:l}}})}else m(l=>({...l,[e]:{status:"healthy",lastCheck:i,lastSuccess:i,loading:!1,successResponse:r}}));try{let t=await (0,c.latestHealthChecksCall)(l),r=a.data.find(l=>l.model_name===e);if(r){let l=r.model_info.id,a=null===(s=t.latest_health_checks)||void 0===s?void 0:s[l];if(a){let l=a.error_message||void 0;m(t=>{var s,r,i,n,o,d,c;return{...t,[e]:{status:a.status||(null===(s=t[e])||void 0===s?void 0:s.status)||"unknown",lastCheck:a.checked_at?new Date(a.checked_at).toLocaleString():(null===(r=t[e])||void 0===r?void 0:r.lastCheck)||"None",lastSuccess:"healthy"===a.status?a.checked_at?new Date(a.checked_at).toLocaleString():(null===(i=t[e])||void 0===i?void 0:i.lastSuccess)||"None":(null===(n=t[e])||void 0===n?void 0:n.lastSuccess)||"None",loading:!1,error:l?w(l):null===(o=t[e])||void 0===o?void 0:o.error,fullError:l||(null===(d=t[e])||void 0===d?void 0:d.fullError),successResponse:"healthy"===a.status?a:null===(c=t[e])||void 0===c?void 0:c.successResponse}}})}}}catch(e){console.debug("Could not fetch updated status from database (non-critical):",e)}}catch(s){let l=new Date().toLocaleString(),a=s instanceof Error?s.message:String(s),t=w(a);m(s=>{var r;return{...s,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=s[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:t,fullError:a}}})}}},k=async()=>{let e=u.length>0?u:s,t=e.reduce((e,l)=>(e[l]={...d[l],loading:!0,status:"checking"},e),{});m(e=>({...e,...t}));let r={},i=e.map(async e=>{if(l)try{let t=await (0,c.individualModelHealthCheckCall)(l,e);r[e]=t;let s=new Date().toLocaleString();if(t.unhealthy_count>0&&t.unhealthy_endpoints&&t.unhealthy_endpoints.length>0){var a;let l=(null===(a=t.unhealthy_endpoints[0])||void 0===a?void 0:a.error)||"Health check failed",r=w(l);m(a=>{var t;return{...a,[e]:{status:"unhealthy",lastCheck:s,lastSuccess:(null===(t=a[e])||void 0===t?void 0:t.lastSuccess)||"None",loading:!1,error:r,fullError:l}}})}else m(l=>({...l,[e]:{status:"healthy",lastCheck:s,lastSuccess:s,loading:!1,successResponse:t}}))}catch(s){console.error("Health check failed for ".concat(e,":"),s);let l=new Date().toLocaleString(),a=s instanceof Error?s.message:String(s),t=w(a);m(s=>{var r;return{...s,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=s[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:t,fullError:a}}})}});await Promise.allSettled(i);try{if(!l)return;let t=await (0,c.latestHealthChecksCall)(l);t.latest_health_checks&&Object.entries(t.latest_health_checks).forEach(l=>{let[t,s]=l,r=a.data.find(e=>e.model_info.id===t);if(r&&e.includes(r.model_name)&&s){let e=r.model_name,l=s.error_message||void 0;m(a=>{let t=a[e];return{...a,[e]:{status:s.status||(null==t?void 0:t.status)||"unknown",lastCheck:s.checked_at?new Date(s.checked_at).toLocaleString():(null==t?void 0:t.lastCheck)||"None",lastSuccess:"healthy"===s.status&&s.checked_at?new Date(s.checked_at).toLocaleString():(null==t?void 0:t.lastSuccess)||"None",loading:!1,error:l?w(l):null==t?void 0:t.error,fullError:l||(null==t?void 0:t.fullError),successResponse:"healthy"===s.status?s:null==t?void 0:t.successResponse}}})}})}catch(e){console.warn("Failed to fetch updated health statuses from database (non-critical):",e)}},A=e=>{p(e),e?h(s):h([])},E=()=>{f(!1),_(null)},F=()=>{y(!1),N(null)};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(eX.Z,{children:"Model Health Status"}),(0,t.jsx)(n.Z,{className:"text-gray-600 mt-1",children:"Run health checks on individual models to verify they are working correctly"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[u.length>0&&(0,t.jsx)(eY.Z,{size:"sm",variant:"light",onClick:()=>A(!1),className:"px-3 py-1 text-sm",children:"Clear Selection"}),(0,t.jsx)(eY.Z,{size:"sm",variant:"secondary",onClick:k,disabled:Object.values(d).some(e=>e.loading),className:"px-3 py-1 text-sm",children:u.length>0&&u.length<s.length?"Run Selected Checks":"Run All Checks"})]})]})}),(0,t.jsx)("div",{children:(0,t.jsx)(le.C,{columns:lO(d,u,x,(e,l)=>{l?h(l=>[...l,e]):(h(l=>l.filter(l=>l!==e)),p(!1))},A,C,e=>{switch(e){case"healthy":return(0,t.jsx)(ll.Z,{color:"emerald",children:"healthy"});case"unhealthy":return(0,t.jsx)(ll.Z,{color:"red",children:"unhealthy"});case"checking":return(0,t.jsx)(ll.Z,{color:"blue",children:"checking"});case"none":return(0,t.jsx)(ll.Z,{color:"gray",children:"none"});default:return(0,t.jsx)(ll.Z,{color:"gray",children:"unknown"})}},r,(e,l,a)=>{_({modelName:e,cleanedError:l,fullError:a}),f(!0)},(e,l)=>{N({modelName:e,response:l}),y(!0)},i),data:a.data.map(e=>{let l=d[e.model_name]||{status:"none",lastCheck:"None",loading:!1};return{model_name:e.model_name,model_info:e.model_info,provider:e.provider,dheera_ai_model_name:e.dheera_ai_model_name,health_status:l.status,last_check:l.lastCheck,last_success:l.lastSuccess||"None",health_loading:l.loading,health_error:l.error,health_full_error:l.fullError}}),isLoading:!1,table:Z})}),(0,t.jsx)(S.Z,{title:j?"Health Check Error - ".concat(j.modelName):"Error Details",open:g,onCancel:E,footer:[(0,t.jsx)(I.ZP,{onClick:E,children:"Close"},"close")],width:800,children:j&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Error:"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)(n.Z,{className:"text-red-800",children:j.cleanedError})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Full Error Details:"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,t.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:j.fullError})})]})]})}),(0,t.jsx)(S.Z,{title:b?"Health Check Response - ".concat(b.modelName):"Response Details",open:v,onCancel:F,footer:[(0,t.jsx)(I.ZP,{onClick:F,children:"Close"},"close")],width:800,children:b&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Status:"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,t.jsx)(n.Z,{className:"text-green-800",children:"Health check passed successfully"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"font-medium",children:"Response Details:"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,t.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(b.response,null,2)})})]})]})})]})},lz=a(86462),lq=a(47686),lB=a(77355),lU=a(93416),lG=a(95704),lH=e=>{let{accessToken:l,initialModelGroupAlias:a={},onAliasUpdate:s}=e,[r,i]=(0,o.useState)([]),[n,m]=(0,o.useState)({aliasName:"",targetModelGroup:""}),[u,h]=(0,o.useState)(null),[x,p]=(0,o.useState)(!0);(0,o.useEffect)(()=>{i(Object.entries(a).map((e,l)=>{var a;let[t,s]=e;return{id:"".concat(l,"-").concat(t),aliasName:t,targetModelGroup:"string"==typeof s?s:null!==(a=null==s?void 0:s.model)&&void 0!==a?a:""}}))},[a]);let g=async e=>{if(!l)return console.error("Access token is missing"),!1;try{let a={};return e.forEach(e=>{a[e.aliasName]=e.targetModelGroup}),console.log("Saving model group alias:",a),await (0,c.setCallbacksCall)(l,{router_settings:{model_group_alias:a}}),s&&s(a),!0}catch(e){return console.error("Failed to save model group alias settings:",e),d.Z.fromBackend("Failed to save model group alias settings"),!1}},f=async()=>{if(!n.aliasName||!n.targetModelGroup){d.Z.fromBackend("Please provide both alias name and target model group");return}if(r.some(e=>e.aliasName===n.aliasName)){d.Z.fromBackend("An alias with this name already exists");return}let e=[...r,{id:"".concat(Date.now(),"-").concat(n.aliasName),aliasName:n.aliasName,targetModelGroup:n.targetModelGroup}];await g(e)&&(i(e),m({aliasName:"",targetModelGroup:""}),d.Z.success("Alias added successfully"))},j=e=>{h({...e})},_=async()=>{if(!u)return;if(!u.aliasName||!u.targetModelGroup){d.Z.fromBackend("Please provide both alias name and target model group");return}if(r.some(e=>e.id!==u.id&&e.aliasName===u.aliasName)){d.Z.fromBackend("An alias with this name already exists");return}let e=r.map(e=>e.id===u.id?u:e);await g(e)&&(i(e),h(null),d.Z.success("Alias updated successfully"))},v=()=>{h(null)},b=async e=>{let l=r.filter(l=>l.id!==e);await g(l)&&(i(l),d.Z.success("Alias deleted successfully"))},N=r.reduce((e,l)=>(e[l.aliasName]=l.targetModelGroup,e),{});return(0,t.jsxs)(lG.Zb,{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>p(!x),children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(lG.Dx,{className:"mb-0",children:"Model Group Alias Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Create aliases for your model groups to simplify API calls. For example, you can create an alias 'gpt-4o' that points to 'gpt-4o-mini-openai' model group."})]}),(0,t.jsx)("div",{className:"flex items-center",children:x?(0,t.jsx)(lz.Z,{className:"w-5 h-5 text-gray-500"}):(0,t.jsx)(lq.Z,{className:"w-5 h-5 text-gray-500"})})]}),x&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(lG.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Add New Alias"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Alias Name"}),(0,t.jsx)("input",{type:"text",value:n.aliasName,onChange:e=>m({...n,aliasName:e.target.value}),placeholder:"e.g., gpt-4o",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Target Model Group"}),(0,t.jsx)("input",{type:"text",value:n.targetModelGroup,onChange:e=>m({...n,targetModelGroup:e.target.value}),placeholder:"e.g., gpt-4o-mini-openai",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("button",{onClick:f,disabled:!n.aliasName||!n.targetModelGroup,className:"flex items-center px-4 py-2 rounded-md text-sm ".concat(n.aliasName&&n.targetModelGroup?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,t.jsx)(lB.Z,{className:"w-4 h-4 mr-1"}),"Add Alias"]})})]})]}),(0,t.jsx)(lG.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Manage Existing Aliases"}),(0,t.jsx)("div",{className:"rounded-lg custom-border relative mb-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(lG.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(lG.ss,{children:(0,t.jsxs)(lG.SC,{children:[(0,t.jsx)(lG.xs,{className:"py-1 h-8",children:"Alias Name"}),(0,t.jsx)(lG.xs,{className:"py-1 h-8",children:"Target Model Group"}),(0,t.jsx)(lG.xs,{className:"py-1 h-8",children:"Actions"})]})}),(0,t.jsxs)(lG.RM,{children:[r.map(e=>(0,t.jsx)(lG.SC,{className:"h-8",children:u&&u.id===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(lG.pj,{className:"py-0.5",children:(0,t.jsx)("input",{type:"text",value:u.aliasName,onChange:e=>h({...u,aliasName:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,t.jsx)(lG.pj,{className:"py-0.5",children:(0,t.jsx)("input",{type:"text",value:u.targetModelGroup,onChange:e=>h({...u,targetModelGroup:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,t.jsx)(lG.pj,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:_,className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:"Save"}),(0,t.jsx)("button",{onClick:v,className:"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100",children:"Cancel"})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(lG.pj,{className:"py-0.5 text-sm text-gray-900",children:e.aliasName}),(0,t.jsx)(lG.pj,{className:"py-0.5 text-sm text-gray-500",children:e.targetModelGroup}),(0,t.jsx)(lG.pj,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>j(e),className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:(0,t.jsx)(lU.Z,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:()=>b(e.id),className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100",children:(0,t.jsx)(y.Z,{className:"w-3 h-3"})})]})})]})},e.id)),0===r.length&&(0,t.jsx)(lG.SC,{children:(0,t.jsx)(lG.pj,{colSpan:3,className:"py-0.5 text-sm text-gray-500 text-center",children:"No aliases added yet. Add a new alias above."})})]})]})})}),(0,t.jsxs)(lG.Zb,{children:[(0,t.jsx)(lG.Dx,{className:"mb-4",children:"Configuration Example"}),(0,t.jsx)(lG.xv,{className:"text-gray-600 mb-4",children:"Here's how your current aliases would look in the config.yaml:"}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 font-mono text-sm",children:(0,t.jsxs)("div",{className:"text-gray-700",children:["router_settings:",(0,t.jsx)("br",{}),"\xa0\xa0model_group_alias:",0===Object.keys(N).length?(0,t.jsxs)("span",{className:"text-gray-500",children:[(0,t.jsx)("br",{}),"\xa0\xa0\xa0\xa0# No aliases configured yet"]}):Object.entries(N).map(e=>{let[l,a]=e;return(0,t.jsxs)("span",{children:[(0,t.jsx)("br",{}),'\xa0\xa0\xa0\xa0"',l,'": "',a,'"']},l)})]})})]})]})]})},lK=a(27593),lJ=e=>{var l,a,u,x;let{accessToken:p,token:g,userRole:j,userID:v,modelData:y={data:[]},keys:b,setModelData:Z,premiumUser:w,teams:S}=e,[k]=N.Z.useForm(),[A,I]=(0,o.useState)(null),[E,F]=(0,o.useState)(""),[P,M]=(0,o.useState)([]),[T,R]=(0,o.useState)([]),[D,O]=(0,o.useState)(m.Cl.Anthropic),[L,V]=(0,o.useState)(!1),[z,q]=(0,o.useState)(null),[B,U]=(0,o.useState)([]),[G,H]=(0,o.useState)([]),[K,es]=(0,o.useState)(null),[er,ei]=(0,o.useState)([]),[en,eo]=(0,o.useState)([]),[ed,ec]=(0,o.useState)([]),[em,eu]=(0,o.useState)([]),[eh,ex]=(0,o.useState)([]),[ep,eg]=(0,o.useState)([]),[ef,ej]=(0,o.useState)([]),[e_,ev]=(0,o.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[ey,eb]=(0,o.useState)(null),[eN,eZ]=(0,o.useState)(null),[ew,eC]=(0,o.useState)(0),[eS,ek]=(0,o.useState)({}),[eA,eI]=(0,o.useState)([]),[eE,eF]=(0,o.useState)(!1),[eP,eM]=(0,o.useState)(null),[eT,eR]=(0,o.useState)(null),[eD,eO]=(0,o.useState)([]),[eL,eV]=(0,o.useState)({}),[ez,eq]=(0,o.useState)(!1),[eB,eU]=(0,o.useState)(null),[eG,eH]=(0,o.useState)(!1),[eJ,eW]=(0,o.useState)(null),[eY,e$]=(0,o.useState)(null),[eQ,eX]=(0,o.useState)(!1),e0=(0,o.useRef)(null),[e1,e2]=(0,o.useState)(0),e4=(0,s.NL)(),{data:e5,isLoading:e6,refetch:e3}=_(p,v,j),{data:e7}=f(p),le=(null==e7?void 0:e7.credentials)||[],{data:ll}=(0,lM.L)(p||""),la=j&&(0,et.P4)(j),lt=j&&et.lo.includes(j),ls=v&&(0,et.yV)(S,v),lr=lt&&(null==ll?void 0:null===(l=ll.values)||void 0===l?void 0:l.disable_model_add_for_internal_users)===!0,ln=!la&&(lr||!ls);(0,o.useEffect)(()=>{let e=e=>{e0.current&&!e0.current.contains(e.target)&&eX(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let lo={name:"file",accept:".json",pastable:!1,beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;k.setFieldsValue({vertex_credentials:l})}},l.readAsText(e)}return!1},onChange(e){"done"===e.file.status?d.Z.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&d.Z.fromBackend("".concat(e.file.name," file upload failed."))}},ld=()=>{F(new Date().toLocaleString()),e4.invalidateQueries({queryKey:["models","list"]}),e3()},lc=async()=>{if(p)try{let e={router_settings:{}};"global"===K?(eN&&(e.router_settings.retry_policy=eN),d.Z.success("Global retry settings saved successfully")):(ey&&(e.router_settings.model_group_retry_policy=ey),d.Z.success("Retry settings saved successfully for ".concat(K))),await (0,c.setCallbacksCall)(p,e)}catch(e){d.Z.fromBackend("Failed to save retry settings")}};if((0,o.useEffect)(()=>{if(!p||!g||!j||!v||!e5)return;let e=async()=>{try{var e,l,a,t,s,r,i,n,o,d,m,u;Z(e5);let h=await (0,c.modelSettingsCall)(p);h&&R(h);let x=new Set;for(let e=0;e<e5.data.length;e++){let l=e5.data[e];x.add(l.model_name)}let g=Array.from(x);g=g.sort(),U(g);let f=new Set;for(let e=0;e<e5.data.length;e++){let l=e5.data[e].model_info;if(l){let e=l.access_groups;if(e)for(let l=0;l<e.length;l++)f.add(e[l])}}H(Array.from(f));let _="all";g.length>0&&(_=g[g.length-1]);let y=await (0,c.modelMetricsCall)(p,v,j,_,null===(e=e_.from)||void 0===e?void 0:e.toISOString(),null===(l=e_.to)||void 0===l?void 0:l.toISOString(),null==eP?void 0:eP.token,eT);ei(y.data),eo(y.all_api_bases);let b=await (0,c.streamingModelMetricsCall)(p,_,null===(a=e_.from)||void 0===a?void 0:a.toISOString(),null===(t=e_.to)||void 0===t?void 0:t.toISOString());ec(b.data),eu(b.all_api_bases);let N=await (0,c.modelExceptionsCall)(p,v,j,_,null===(s=e_.from)||void 0===s?void 0:s.toISOString(),null===(r=e_.to)||void 0===r?void 0:r.toISOString(),null==eP?void 0:eP.token,eT);ex(N.data),eg(N.exception_types);let w=await (0,c.modelMetricsSlowResponsesCall)(p,v,j,_,null===(i=e_.from)||void 0===i?void 0:i.toISOString(),null===(n=e_.to)||void 0===n?void 0:n.toISOString(),null==eP?void 0:eP.token,eT),C=await (0,c.adminGlobalActivityExceptions)(p,null===(o=e_.from)||void 0===o?void 0:o.toISOString().split("T")[0],null===(d=e_.to)||void 0===d?void 0:d.toISOString().split("T")[0],_);ek(C);let S=await (0,c.adminGlobalActivityExceptionsPerDeployment)(p,null===(m=e_.from)||void 0===m?void 0:m.toISOString().split("T")[0],null===(u=e_.to)||void 0===u?void 0:u.toISOString().split("T")[0],_);eI(S),ej(w);let k=await (0,c.allEndUsersCall)(p);eO(null==k?void 0:k.map(e=>e.user_id));let A=(await (0,c.getCallbacksCall)(p,v,j)).router_settings,I=A.model_group_retry_policy,E=A.num_retries;eb(I),eZ(A.retry_policy),eC(E);let F=A.model_group_alias||{};eV(F)}catch(e){console.error("Error fetching model data:",e)}};p&&g&&j&&v&&e5&&e();let l=async()=>{let e=await (0,c.modelCostMap)();console.log("received model cost map data: ".concat(Object.keys(e))),I(e)};null==A&&l()},[p,g,j,v,e5]),!y||e6||!p||!g||!j||!v)return(0,t.jsx)("div",{children:"Loading..."});let lm=[],lu=[];for(let e=0;e<y.data.length;e++){let l=y.data[e],t=null==l?void 0:null===(a=l.dheera_ai_params)||void 0===a?void 0:a.model,s=null==l?void 0:null===(u=l.dheera_ai_params)||void 0===u?void 0:u.custom_llm_provider,r=null==l?void 0:l.model_info,i="",n="Undefined",o="Undefined",d="Undefined",c="Undefined",m={},h=e=>null!=A&&"object"==typeof A&&e in A?A[e].dheera_ai_provider:"openai";if(t){let e=t.split("/"),l=e[0];(i=s)||(i=1===e.length?h(t):l)}else i="-";r&&(n=null==r?void 0:r.input_cost_per_token,o=null==r?void 0:r.output_cost_per_token,d=null==r?void 0:r.max_tokens,c=null==r?void 0:r.max_input_tokens),(null==l?void 0:l.dheera_ai_params)&&(m=Object.fromEntries(Object.entries(null==l?void 0:l.dheera_ai_params).filter(e=>{let[l]=e;return"model"!==l&&"api_base"!==l}))),y.data[e].provider=i,y.data[e].input_cost=n,y.data[e].output_cost=o,y.data[e].dheera_ai_model_name=t,lu.push(i),y.data[e].input_cost&&(y.data[e].input_cost=(1e6*Number(y.data[e].input_cost)).toFixed(2)),y.data[e].output_cost&&(y.data[e].output_cost=(1e6*Number(y.data[e].output_cost)).toFixed(2)),y.data[e].max_tokens=d,y.data[e].max_input_tokens=c,y.data[e].api_base=null==l?void 0:null===(x=l.dheera_ai_params)||void 0===x?void 0:x.api_base,y.data[e].cleanedLitellmParams=m,lm.push(l.model_name)}if(j&&"Admin Viewer"==j){let{Title:e,Paragraph:l}=C.default;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:"Access Denied"}),(0,t.jsx)(l,{children:"Ask your proxy admin for access to view all models"})]})}return(Object.keys(m.Cl).find(e=>m.Cl[e]===D),eJ)?(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsx)(e9.Z,{teamId:eJ,onClose:()=>eW(null),accessToken:p,is_team_admin:"Admin"===j,is_proxy_admin:"Proxy Admin"===j,userModels:lm,editTeam:!1,onUpdate:ld})}):(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(i.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(r.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Model Management"}),et.ZL.includes(j)?(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Add and manage models for the proxy"}):(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Add models for teams you are an admin for."})]})}),eB?(0,t.jsx)(e8,{modelId:eB,editModel:!0,onClose:()=>{eU(null),eH(!1)},modelData:y.data.find(e=>e.model_info.id===eB),accessToken:p,userID:v,userRole:j,setEditModalVisible:V,setSelectedModel:q,onModelUpdate:e=>{e.deleted?Z({...y,data:y.data.filter(l=>l.model_info.id!==e.model_info.id)}):Z({...y,data:y.data.map(l=>l.model_info.id===e.model_info.id?e:l)}),e4.invalidateQueries({queryKey:["models","list"]}),ld()},modelAccessGroups:G}):(0,t.jsxs)(X.Z,{index:e1,onIndexChange:e2,className:"gap-2 h-[75vh] w-full ",children:[(0,t.jsxs)(ee.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex",children:[et.ZL.includes(j)?(0,t.jsx)(Q.Z,{children:"All Models"}):(0,t.jsx)(Q.Z,{children:"Your Models"}),!ln&&(0,t.jsx)(Q.Z,{children:"Add Model"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"LLM Credentials"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Pass-Through Endpoints"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Health Status"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Model Analytics"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Model Retry Settings"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Model Group Alias"}),et.ZL.includes(j)&&(0,t.jsx)(Q.Z,{children:"Price Data Reload"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[E&&(0,t.jsxs)(n.Z,{children:["Last Refreshed: ",E]}),(0,t.jsx)($.Z,{icon:Y.Z,variant:"shadow",size:"xs",className:"self-center",onClick:ld})]})]}),(0,t.jsxs)(ea.Z,{children:[(0,t.jsx)(li,{selectedModelGroup:K,setSelectedModelGroup:es,availableModelGroups:B,availableModelAccessGroups:G,setSelectedModelId:eU,setSelectedTeamId:eW,setEditModel:eH,modelData:y}),!ln&&(0,t.jsx)(el.Z,{className:"h-full",children:(0,t.jsx)(eK,{form:k,handleOk:()=>{k.validateFields().then(e=>{h(e,p,k,ld)}).catch(e=>{var l;let a=(null===(l=e.errorFields)||void 0===l?void 0:l.map(e=>"".concat(e.name.join("."),": ").concat(e.errors.join(", "))).join(" | "))||"Unknown validation error";d.Z.fromBackend("Please fill in the following required fields: ".concat(a))})},selectedProvider:D,setSelectedProvider:O,providerModels:P,setProviderModelsFn:e=>{M((0,m.bK)(e,A))},getPlaceholder:m.ph,uploadProps:lo,showAdvancedSettings:ez,setShowAdvancedSettings:eq,teams:S,credentials:le,accessToken:p,userRole:j,premiumUser:w})}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(J,{uploadProps:lo})}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(lK.Z,{accessToken:p,userRole:j,userID:v,modelData:y,premiumUser:w})}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(lV,{accessToken:p,modelData:y,all_models_on_proxy:lm,getDisplayModelName:W,setSelectedModelId:eU})}),(0,t.jsx)(lb,{dateValue:e_,setDateValue:ev,selectedModelGroup:K,availableModelGroups:B,setShowAdvancedFilters:eF,modelMetrics:er,modelMetricsCategories:en,streamingModelMetrics:ed,streamingModelMetricsCategories:em,customTooltip:e=>{var l,a;let{payload:s,active:r}=e;if(!r||!s)return null;let i=null===(a=s[0])||void 0===a?void 0:null===(l=a.payload)||void 0===l?void 0:l.date,n=s.sort((e,l)=>l.value-e.value);if(n.length>5){let e=n.length-5;(n=n.slice(0,5)).push({dataKey:"".concat(e," other deployments"),value:s.slice(5).reduce((e,l)=>e+l.value,0),color:"gray"})}return(0,t.jsxs)("div",{className:"w-150 rounded-tremor-default border border-tremor-border bg-tremor-background p-2 text-tremor-default shadow-tremor-dropdown",children:[i&&(0,t.jsxs)("p",{className:"text-tremor-content-emphasis mb-2",children:["Date: ",i]}),n.map((e,l)=>{let a=parseFloat(e.value.toFixed(5)),s=0===a&&e.value>0?"<0.00001":a.toFixed(5);return(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 mt-1 rounded-full bg-".concat(e.color,"-500")}),(0,t.jsx)("p",{className:"text-tremor-content",children:e.dataKey})]}),(0,t.jsx)("p",{className:"font-medium text-tremor-content-emphasis text-righ ml-2",children:s})]},l)})]})},slowResponsesData:ef,modelExceptions:eh,globalExceptionData:eS,allExceptions:ep,globalExceptionPerDeployment:eA,allEndUsers:eD,keys:b,setSelectedAPIKey:eM,setSelectedCustomer:eR,teams:S,selectedAPIKey:eP,selectedCustomer:eT,selectedTeam:eY,setAllExceptions:eg,setGlobalExceptionData:ek,setGlobalExceptionPerDeployment:eI,setModelExceptions:ex,setModelMetrics:ei,setModelMetricsCategories:eo,setSelectedModelGroup:es,setSlowResponsesData:ej,setStreamingModelMetrics:ec,setStreamingModelMetricsCategories:eu}),(0,t.jsx)(lZ,{selectedModelGroup:K,setSelectedModelGroup:es,availableModelGroups:B,globalRetryPolicy:eN,setGlobalRetryPolicy:eZ,defaultRetry:ew,modelGroupRetryPolicy:ey,setModelGroupRetryPolicy:eb,handleSaveRetrySettings:lc}),(0,t.jsx)(el.Z,{children:(0,t.jsx)(lH,{accessToken:p,initialModelGroupAlias:eL,onAliasUpdate:eV})}),(0,t.jsx)(lP,{setModelMap:I})]})]})]})})})}},27593:function(e,l,a){a.d(l,{Z:function(){return Y}});var t=a(57437),s=a(2265),r=a(78489),i=a(47323),n=a(84264),o=a(96761),d=a(19250),c=a(99981),m=a(33866),u=a(15731),h=a(53410),x=a(74998),p=a(59341),g=a(49566),f=a(12514),j=a(97765),_=a(37592),v=a(10032),y=a(22116),b=a(51653),N=a(24199),Z=a(12660),w=a(15424),C=a(58760),S=a(5545),k=a(45246),A=a(96473),I=a(31283),E=e=>{let{value:l={},onChange:a}=e,[r,i]=(0,s.useState)(Object.entries(l)),n=e=>{let l=r.filter((l,a)=>a!==e);i(l),null==a||a(Object.fromEntries(l))},o=(e,l,t)=>{let s=[...r];s[e]=[l,t],i(s),null==a||a(Object.fromEntries(s))};return(0,t.jsxs)("div",{children:[r.map((e,l)=>{let[a,s]=e;return(0,t.jsxs)(C.Z,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,t.jsx)(I.o,{placeholder:"Header Name",value:a,onChange:e=>o(l,e.target.value,s)}),(0,t.jsx)(I.o,{placeholder:"Header Value",value:s,onChange:e=>o(l,a,e.target.value)}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,t.jsx)(k.Z,{onClick:()=>n(l),style:{cursor:"pointer"}})})]},l)}),(0,t.jsx)(S.ZP,{type:"dashed",onClick:()=>{i([...r,["",""]])},icon:(0,t.jsx)(A.Z,{}),children:"Add Header"})]})},F=a(77565),P=e=>{let{pathValue:l,targetValue:a,includeSubpath:s}=e,r=(0,d.getProxyBaseUrl)();return l&&a?(0,t.jsxs)(f.Z,{className:"p-5",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Preview"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-5",children:"How your requests will be routed"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"Basic routing:"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint"}),(0,t.jsx)("code",{className:"font-mono text-sm text-gray-900",children:l?"".concat(r).concat(l):""})]}),(0,t.jsx)("div",{className:"text-gray-400",children:(0,t.jsx)(F.Z,{className:"text-lg"})}),(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,t.jsx)("code",{className:"font-mono text-sm text-gray-900",children:a})]})]})]}),s&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"With subpaths:"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint + subpath"}),(0,t.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[l&&"".concat(r).concat(l),(0,t.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]}),(0,t.jsx)("div",{className:"text-gray-400",children:(0,t.jsx)(F.Z,{className:"text-lg"})}),(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,t.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[a,(0,t.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Any path after ",l," will be appended to the target URL"]})]})}),!s&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(w.Z,{className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-medium",children:"Not seeing the routing you wanted?"})," Try enabling - Include Subpaths - above - this allows subroutes like"," ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded font-mono text-xs",children:"/api/v1/models"})," to be forwarded automatically."]})]})})]})]}):null},M=a(9114),T=a(63709),R=e=>{let{premiumUser:l,authEnabled:a,onAuthChange:s}=e;return(0,t.jsxs)(f.Z,{className:"p-6",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Security"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-4",children:"When enabled, requests to this endpoint will require a valid DheeraAI Virtual Key"}),l?(0,t.jsx)(v.Z.Item,{name:"auth",valuePropName:"checked",className:"mb-0",children:(0,t.jsx)(T.Z,{checked:a,onChange:e=>{s(e)}})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(0,t.jsx)(T.Z,{disabled:!0,checked:!1,style:{outline:"2px solid #d1d5db",outlineOffset:"2px"}}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-400",children:"Authentication (Premium)"})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsxs)(n.Z,{className:"text-sm text-yellow-800",children:["Setting authentication for pass-through endpoints is a DheeraAI Enterprise feature. Get a trial key"," ",(0,t.jsx)("a",{href:"https://www.dheera_ai.ai/#pricing",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"here"}),"."]})})]})]})},D=a(67479),O=e=>{let{accessToken:l,value:a={},onChange:r,disabled:i=!1}=e,[n,d]=(0,s.useState)(Object.keys(a)),[m,u]=(0,s.useState)(a);(0,s.useEffect)(()=>{u(a),d(Object.keys(a))},[a]);let h=(e,l,a)=>{var t,s;let i=m[e]||{},n={...m,[e]:{...i,[l]:a.length>0?a:void 0}};(null===(t=n[e])||void 0===t?void 0:t.request_fields)||(null===(s=n[e])||void 0===s?void 0:s.response_fields)||(n[e]=null),u(n),r&&r(n)};return(0,t.jsxs)(f.Z,{className:"p-6",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Guardrails"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Configure guardrails to enforce policies on requests and responses. Guardrails are opt-in for passthrough endpoints."}),(0,t.jsx)(b.Z,{message:(0,t.jsxs)("span",{children:["Field-Level Targeting"," ",(0,t.jsx)("a",{href:"https://docs.dheera_ai.ai/docs/proxy/pass_through_guardrails#field-level-targeting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"(Learn More)"})]}),description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:"Optionally specify which fields to check. If left empty, the entire request/response is sent to the guardrail."}),(0,t.jsxs)("div",{className:"text-xs space-y-1 mt-2",children:[(0,t.jsx)("div",{className:"font-medium",children:"Common Examples:"}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"query"})," - Single field"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"documents[*].text"})," - All text in documents array"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"messages[*].content"})," - All message contents"]})]})]}),type:"info",showIcon:!0,className:"mb-4"}),(0,t.jsx)(v.Z.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Select Guardrails",(0,t.jsx)(c.Z,{title:"Choose which guardrails should run on this endpoint. Org/team/key level guardrails will also be included.",children:(0,t.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),children:(0,t.jsx)(D.Z,{accessToken:l,value:n,onChange:e=>{d(e);let l={};e.forEach(e=>{l[e]=m[e]||null}),u(l),r&&r(l)},disabled:i})}),n.length>0&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Field Targeting (Optional)"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tip: Leave empty to check entire payload"})]}),n.map(e=>{var l,a;return(0,t.jsxs)(f.Z,{className:"p-4 bg-gray-50",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-3",children:e}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Request Fields (pre_call)",(0,t.jsx)(c.Z,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Specify which request fields to check"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsx)("div",{children:"Examples:"}),(0,t.jsx)("div",{children:"• query"}),(0,t.jsx)("div",{children:"• documents[*].text"}),(0,t.jsx)("div",{children:"• messages[*].content"})]})]}),children:(0,t.jsx)(w.Z,{className:"ml-1 text-gray-400"})})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{var l;let a=(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[];h(e,"request_fields",[...a,"query"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ query"}),(0,t.jsx)("button",{type:"button",onClick:()=>{var l;let a=(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[];h(e,"request_fields",[...a,"documents[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ documents[*]"})]})]}),(0,t.jsx)(_.default,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., query, documents[*].text)",value:(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[],onChange:l=>h(e,"request_fields",l),disabled:i,tokenSeparators:[","]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Response Fields (post_call)",(0,t.jsx)(c.Z,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Specify which response fields to check"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsx)("div",{children:"Examples:"}),(0,t.jsx)("div",{children:"• results[*].text"}),(0,t.jsx)("div",{children:"• choices[*].message.content"})]})]}),children:(0,t.jsx)(w.Z,{className:"ml-1 text-gray-400"})})]}),(0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsx)("button",{type:"button",onClick:()=>{var l;let a=(null===(l=m[e])||void 0===l?void 0:l.response_fields)||[];h(e,"response_fields",[...a,"results[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ results[*]"})})]}),(0,t.jsx)(_.default,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., results[*].text)",value:(null===(a=m[e])||void 0===a?void 0:a.response_fields)||[],onChange:l=>h(e,"response_fields",l),disabled:i,tokenSeparators:[","]})]})]})]},e)})]})]})};let{Option:L}=_.default;var V=e=>{let{accessToken:l,setPassThroughItems:a,passThroughItems:i,premiumUser:n=!1}=e,[m]=v.Z.useForm(),[u,h]=(0,s.useState)(!1),[x,_]=(0,s.useState)(!1),[C,S]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),[I,F]=(0,s.useState)(""),[T,D]=(0,s.useState)(!0),[L,V]=(0,s.useState)(!1),[z,q]=(0,s.useState)({}),B=()=>{m.resetFields(),A(""),F(""),D(!0),q({}),h(!1)},U=e=>{let l=e;e&&!e.startsWith("/")&&(l="/"+e),A(l),m.setFieldsValue({path:l})},G=async e=>{console.log("addPassThrough called with:",e),_(!0);try{!n&&"auth"in e&&delete e.auth,z&&Object.keys(z).length>0&&(e.guardrails=z),console.log("formValues: ".concat(JSON.stringify(e)));let t=(await (0,d.createPassThroughEndpoint)(l,e)).endpoints[0],s=[...i,t];a(s),M.Z.success("Pass-through endpoint created successfully"),m.resetFields(),A(""),F(""),D(!0),q({}),h(!1)}catch(e){M.Z.fromBackend("Error creating pass-through endpoint: "+e)}finally{_(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Z,{className:"mx-auto mb-4 mt-4",onClick:()=>h(!0),children:"+ Add Pass-Through Endpoint"}),(0,t.jsx)(y.Z,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,t.jsx)(Z.Z,{className:"text-xl text-blue-500"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Pass-Through Endpoint"})]}),open:u,width:1e3,onCancel:B,footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(b.Z,{message:"What is a Pass-Through Endpoint?",description:"Route requests from your DheeraAI proxy to any external API. Perfect for custom models, image generation APIs, or any service you want to proxy through DheeraAI.",type:"info",showIcon:!0,className:"mb-6"}),(0,t.jsxs)(v.Z,{form:m,onFinish:G,layout:"vertical",className:"space-y-6",initialValues:{include_subpath:!0,path:k,target:I},children:[(0,t.jsxs)(f.Z,{className:"p-5",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Configuration"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-5",children:"Configure how requests to your domain will be forwarded to the target API"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)(v.Z.Item,{label:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Path Prefix"}),name:"path",rules:[{required:!0,message:"Path is required",pattern:/^\//}],extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example: /bria, /adobe-photoshop, /elasticsearch"}),className:"mb-4",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(g.Z,{placeholder:"bria",value:k,onChange:e=>U(e.target.value),className:"flex-1"})})}),(0,t.jsx)(v.Z.Item,{label:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Target URL"}),name:"target",rules:[{required:!0,message:"Target URL is required"},{type:"url",message:"Please enter a valid URL"}],extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example:https://engine.prod.bria-api.com"}),className:"mb-4",children:(0,t.jsx)(g.Z,{placeholder:"https://engine.prod.bria-api.com",value:I,onChange:e=>{F(e.target.value),m.setFieldsValue({target:e.target.value})}})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Include Subpaths"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:"Forward all subpaths to the target API (recommended for REST APIs)"})]}),(0,t.jsx)(v.Z.Item,{name:"include_subpath",valuePropName:"checked",className:"mb-0",children:(0,t.jsx)(p.Z,{checked:T,onChange:D})})]})]})]}),(0,t.jsx)(P,{pathValue:k,targetValue:I,includeSubpath:T}),(0,t.jsxs)(f.Z,{className:"p-6",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Headers"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Add headers that will be sent with every request to the target API"}),(0,t.jsx)(v.Z.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Authentication Headers",(0,t.jsx)(c.Z,{title:"Authentication and other headers to forward with requests",children:(0,t.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"headers",rules:[{required:!0,message:"Please configure the headers"}],extra:(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Add authentication tokens and other required headers"}),(0,t.jsx)("div",{children:"Common examples: auth_token, Authorization, x-api-key"})]}),children:(0,t.jsx)(E,{})})]}),(0,t.jsx)(R,{premiumUser:n,authEnabled:L,onAuthChange:e=>{V(e),m.setFieldsValue({auth:e})}}),(0,t.jsx)(O,{accessToken:l,value:z,onChange:q}),(0,t.jsxs)(f.Z,{className:"p-6",children:[(0,t.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Billing"}),(0,t.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Optional cost tracking for this endpoint"}),(0,t.jsx)(v.Z.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Cost Per Request (USD)",(0,t.jsx)(c.Z,{title:"Optional: Track costs for requests to this endpoint",children:(0,t.jsx)(w.Z,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:"cost_per_request",extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"The cost charged for each request through this endpoint"}),children:(0,t.jsx)(N.Z,{min:0,step:.001,precision:4,placeholder:"2.0000",size:"large"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:[(0,t.jsx)(r.Z,{variant:"secondary",onClick:B,children:"Cancel"}),(0,t.jsx)(r.Z,{variant:"primary",loading:x,onClick:()=>{console.log("Submit button clicked"),m.submit()},children:x?"Creating...":"Add Pass-Through Endpoint"})]})]})]})})]})},z=a(30078),q=a(4260),B=a(19015),U=a(87769),G=a(42208);let H=e=>{let{value:l}=e,[a,r]=(0,s.useState)(!1),i=JSON.stringify(l,null,2);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("pre",{className:"font-mono text-xs bg-gray-50 p-2 rounded max-w-md overflow-auto",children:a?i:"••••••••"}),(0,t.jsx)("button",{onClick:()=>r(!a),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:a?(0,t.jsx)(U.Z,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(G.Z,{className:"w-4 h-4 text-gray-500"})})]})};var K=e=>{let{endpointData:l,onClose:a,accessToken:r,isAdmin:i,premiumUser:n=!1,onEndpointUpdated:o}=e,[c,m]=(0,s.useState)(l),[u,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)((null==l?void 0:l.auth)||!1),[j,_]=(0,s.useState)((null==l?void 0:l.guardrails)||{}),[y]=v.Z.useForm(),b=async e=>{try{if(!r||!(null==c?void 0:c.id))return;let l={};if(e.headers)try{l="string"==typeof e.headers?JSON.parse(e.headers):e.headers}catch(e){M.Z.fromBackend("Invalid JSON format for headers");return}let a={path:c.path,target:e.target,headers:l,include_subpath:e.include_subpath,cost_per_request:e.cost_per_request,auth:n?e.auth:void 0,guardrails:j&&Object.keys(j).length>0?j:void 0};await (0,d.updatePassThroughEndpoint)(r,c.id,a),m({...c,...a}),p(!1),o&&o()}catch(e){console.error("Error updating endpoint:",e),M.Z.fromBackend("Failed to update pass through endpoint")}},N=async()=>{try{if(!r||!(null==c?void 0:c.id))return;await (0,d.deletePassThroughEndpointsCall)(r,c.id),M.Z.success("Pass through endpoint deleted successfully"),a(),o&&o()}catch(e){console.error("Error deleting endpoint:",e),M.Z.fromBackend("Failed to delete pass through endpoint")}};return u?(0,t.jsx)("div",{className:"p-4",children:"Loading..."}):c?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(S.ZP,{onClick:a,className:"mb-4",children:"← Back"}),(0,t.jsxs)(z.Dx,{children:["Pass Through Endpoint: ",c.path]}),(0,t.jsx)(z.xv,{className:"text-gray-500 font-mono",children:c.id})]})}),(0,t.jsxs)(z.v0,{children:[(0,t.jsxs)(z.td,{className:"mb-4",children:[(0,t.jsx)(z.OK,{children:"Overview"},"overview"),i?(0,t.jsx)(z.OK,{children:"Settings"},"settings"):(0,t.jsx)(t.Fragment,{})]}),(0,t.jsxs)(z.nP,{children:[(0,t.jsxs)(z.x4,{children:[(0,t.jsxs)(z.rj,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,t.jsxs)(z.Zb,{children:[(0,t.jsx)(z.xv,{children:"Path"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(z.Dx,{className:"font-mono",children:c.path})})]}),(0,t.jsxs)(z.Zb,{children:[(0,t.jsx)(z.xv,{children:"Target"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(z.Dx,{children:c.target})})]}),(0,t.jsxs)(z.Zb,{children:[(0,t.jsx)(z.xv,{children:"Configuration"}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)(z.Ct,{color:c.include_subpath?"green":"gray",children:c.include_subpath?"Include Subpath":"Exact Path"})}),(0,t.jsx)("div",{children:(0,t.jsx)(z.Ct,{color:c.auth?"blue":"gray",children:c.auth?"Auth Required":"No Auth"})}),void 0!==c.cost_per_request&&(0,t.jsx)("div",{children:(0,t.jsxs)(z.xv,{children:["Cost per request: $",c.cost_per_request]})})]})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(P,{pathValue:c.path,targetValue:c.target,includeSubpath:c.include_subpath||!1})}),c.headers&&Object.keys(c.headers).length>0&&(0,t.jsxs)(z.Zb,{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Headers"}),(0,t.jsxs)(z.Ct,{color:"blue",children:[Object.keys(c.headers).length," headers configured"]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(H,{value:c.headers})})]}),c.guardrails&&Object.keys(c.guardrails).length>0&&(0,t.jsxs)(z.Zb,{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Guardrails"}),(0,t.jsxs)(z.Ct,{color:"purple",children:[Object.keys(c.guardrails).length," guardrails configured"]})]}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:Object.entries(c.guardrails).map(e=>{let[l,a]=e;return(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:l}),a&&(a.request_fields||a.response_fields)&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[a.request_fields&&(0,t.jsxs)("div",{children:["Request fields: ",a.request_fields.join(", ")]}),a.response_fields&&(0,t.jsxs)("div",{children:["Response fields: ",a.response_fields.join(", ")]})]}),!a&&(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Uses entire payload"})]},l)})})]})]}),i&&(0,t.jsx)(z.x4,{children:(0,t.jsxs)(z.Zb,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(z.Dx,{children:"Pass Through Endpoint Settings"}),(0,t.jsx)("div",{className:"space-x-2",children:!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.zx,{onClick:()=>p(!0),children:"Edit Settings"}),(0,t.jsx)(z.zx,{onClick:N,variant:"secondary",color:"red",children:"Delete Endpoint"})]})})]}),x?(0,t.jsxs)(v.Z,{form:y,onFinish:b,initialValues:{target:c.target,headers:c.headers?JSON.stringify(c.headers,null,2):"",include_subpath:c.include_subpath||!1,cost_per_request:c.cost_per_request,auth:c.auth||!1},layout:"vertical",children:[(0,t.jsx)(v.Z.Item,{label:"Target URL",name:"target",rules:[{required:!0,message:"Please input a target URL"}],children:(0,t.jsx)(z.oi,{placeholder:"https://api.example.com"})}),(0,t.jsx)(v.Z.Item,{label:"Headers (JSON)",name:"headers",children:(0,t.jsx)(q.default.TextArea,{rows:5,placeholder:'{"Authorization": "Bearer your-token", "Content-Type": "application/json"}'})}),(0,t.jsx)(v.Z.Item,{label:"Include Subpath",name:"include_subpath",valuePropName:"checked",children:(0,t.jsx)(T.Z,{})}),(0,t.jsx)(v.Z.Item,{label:"Cost per Request",name:"cost_per_request",children:(0,t.jsx)(B.Z,{min:0,step:.01,precision:2,placeholder:"0.00",addonBefore:"$"})}),(0,t.jsx)(R,{premiumUser:n,authEnabled:g,onAuthChange:e=>{f(e),y.setFieldsValue({auth:e})}}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(O,{accessToken:r||"",value:j,onChange:_})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,t.jsx)(S.ZP,{onClick:()=>p(!1),children:"Cancel"}),(0,t.jsx)(z.zx,{children:"Save Changes"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Path"}),(0,t.jsx)("div",{className:"font-mono",children:c.path})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Target URL"}),(0,t.jsx)("div",{children:c.target})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Include Subpath"}),(0,t.jsx)(z.Ct,{color:c.include_subpath?"green":"gray",children:c.include_subpath?"Yes":"No"})]}),void 0!==c.cost_per_request&&(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Cost per Request"}),(0,t.jsxs)("div",{children:["$",c.cost_per_request]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Authentication Required"}),(0,t.jsx)(z.Ct,{color:c.auth?"green":"gray",children:c.auth?"Yes":"No"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z.xv,{className:"font-medium",children:"Headers"}),c.headers&&Object.keys(c.headers).length>0?(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(H,{value:c.headers})}):(0,t.jsx)("div",{className:"text-gray-500",children:"No headers configured"})]})]})]})})]})]})]}):(0,t.jsx)("div",{className:"p-4",children:"Pass through endpoint not found"})},J=a(60493);let W=e=>{let{value:l}=e,[a,r]=(0,s.useState)(!1),i=JSON.stringify(l);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-mono text-xs",children:a?i:"••••••••"}),(0,t.jsx)("button",{onClick:()=>r(!a),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:a?(0,t.jsx)(U.Z,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(G.Z,{className:"w-4 h-4 text-gray-500"})})]})};var Y=e=>{let{accessToken:l,userRole:a,userID:p,modelData:g,premiumUser:f}=e,[j,_]=(0,s.useState)([]),[v,y]=(0,s.useState)(null),[b,N]=(0,s.useState)(!1),[Z,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{l&&a&&p&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{_(e.endpoints)})},[l,a,p]);let C=async e=>{w(e),N(!0)},S=async()=>{if(null!=Z&&l){try{await (0,d.deletePassThroughEndpointsCall)(l,Z);let e=j.filter(e=>e.id!==Z);_(e),M.Z.success("Endpoint deleted successfully.")}catch(e){console.error("Error deleting the endpoint:",e),M.Z.fromBackend("Error deleting the endpoint: "+e)}N(!1),w(null)}},k=(e,l)=>{C(e)},A=[{header:"ID",accessorKey:"id",cell:e=>(0,t.jsx)(c.Z,{title:e.row.original.id,children:(0,t.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>e.row.original.id&&y(e.row.original.id),children:e.row.original.id})})},{header:"Path",accessorKey:"path"},{header:"Target",accessorKey:"target",cell:e=>(0,t.jsx)(n.Z,{children:e.getValue()})},{header:()=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Authentication"}),(0,t.jsx)(c.Z,{title:"DheeraAI Virtual Key required to call endpoint",children:(0,t.jsx)(u.Z,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),accessorKey:"auth",cell:e=>(0,t.jsx)(m.Z,{color:e.getValue()?"green":"gray",children:e.getValue()?"Yes":"No"})},{header:"Headers",accessorKey:"headers",cell:e=>(0,t.jsx)(W,{value:e.getValue()||{}})},{header:"Actions",id:"actions",cell:e=>{let{row:l}=e;return(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)(i.Z,{icon:h.Z,size:"sm",onClick:()=>l.original.id&&y(l.original.id),title:"Edit"}),(0,t.jsx)(i.Z,{icon:x.Z,size:"sm",onClick:()=>k(l.original.id,l.index),title:"Delete"})]})}}];if(!l)return null;if(v){console.log("selectedEndpointId",v),console.log("generalSettings",j);let e=j.find(e=>e.id===v);return e?(0,t.jsx)(K,{endpointData:e,onClose:()=>y(null),accessToken:l,isAdmin:"Admin"===a||"admin"===a,premiumUser:f,onEndpointUpdated:()=>{l&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{_(e.endpoints)})}}):(0,t.jsx)("div",{children:"Endpoint not found"})}return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Z,{children:"Pass Through Endpoints"}),(0,t.jsx)(n.Z,{className:"text-tremor-content",children:"Configure and manage your pass-through endpoints"})]}),(0,t.jsx)(V,{accessToken:l,setPassThroughItems:_,passThroughItems:j,premiumUser:f}),(0,t.jsx)(J.w,{data:j,columns:A,renderSubComponent:()=>(0,t.jsx)("div",{}),getRowCanExpand:()=>!1,isLoading:!1,noDataMessage:"No pass-through endpoints configured"}),b&&(0,t.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Pass-Through Endpoint"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this pass-through endpoint? This action cannot be undone."})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)(r.Z,{onClick:S,color:"red",className:"ml-2",children:"Delete"}),(0,t.jsx)(r.Z,{onClick:()=>{N(!1),w(null)},children:"Cancel"})]})]})]})})]})}},39789:function(e,l,a){a.d(l,{Z:function(){return n}});var t=a(57437),s=a(2265),r=a(88237),i=a(84264),n=e=>{let{value:l,onValueChange:a,label:n="Select Time Range",className:o="",showTimeRange:d=!0}=e,[c,m]=(0,s.useState)(!1),u=(0,s.useRef)(null),h=(0,s.useCallback)(e=>{m(!0),setTimeout(()=>m(!1),1500),a(e),requestIdleCallback(()=>{if(e.from){let l;let t={...e},s=new Date(e.from);l=new Date(e.to?e.to:e.from),s.toDateString(),l.toDateString(),s.setHours(0,0,0,0),l.setHours(23,59,59,999),t.from=s,t.to=l,a(t)}},{timeout:100})},[a]),x=(0,s.useCallback)((e,l)=>{if(!e||!l)return"";let a=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});if(e.toDateString()!==l.toDateString())return"".concat(a(e)," - ").concat(a(l));{let a=e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),t=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),s=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return"".concat(a,": ").concat(t," - ").concat(s)}},[]);return(0,t.jsxs)("div",{className:o,children:[n&&(0,t.jsx)(i.Z,{className:"mb-2",children:n}),(0,t.jsxs)("div",{className:"relative w-fit",children:[(0,t.jsx)("div",{ref:u,children:(0,t.jsx)(r.Z,{enableSelect:!0,value:l,onValueChange:h,placeholder:"Select date range",enableClear:!1,style:{zIndex:100}})}),c&&(0,t.jsx)("div",{className:"absolute top-1/2 animate-pulse",style:{left:"calc(100% + 8px)",transform:"translateY(-50%)",zIndex:110},children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600 text-sm font-medium bg-white px-2 py-1 rounded-full border border-green-200 shadow-sm whitespace-nowrap",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"✓"}),(0,t.jsx)("span",{className:"text-xs",children:"Selected"})]})})]}),d&&l.from&&l.to&&(0,t.jsx)(i.Z,{className:"mt-2 text-xs text-gray-500",children:x(l.from,l.to)})]})}},60493:function(e,l,a){a.d(l,{w:function(){return o}});var t=a(57437),s=a(2265),r=a(71594),i=a(24525),n=a(19130);function o(e){let{data:l=[],columns:a,getRowCanExpand:o,renderSubComponent:d,isLoading:c=!1,loadingMessage:m="\uD83D\uDE85 Loading logs...",noDataMessage:u="No logs found"}=e,h=(0,r.b7)({data:l,columns:a,getRowCanExpand:o,getRowId:(e,l)=>{var a;return null!==(a=null==e?void 0:e.request_id)&&void 0!==a?a:String(l)},getCoreRowModel:(0,i.sC)(),getExpandedRowModel:(0,i.rV)()});return(0,t.jsx)("div",{className:"rounded-lg custom-border overflow-x-auto w-full max-w-full box-border",children:(0,t.jsxs)(n.iA,{className:"[&_td]:py-0.5 [&_th]:py-1 table-fixed w-full box-border",style:{minWidth:"400px"},children:[(0,t.jsx)(n.ss,{children:h.getHeaderGroups().map(e=>(0,t.jsx)(n.SC,{children:e.headers.map(e=>(0,t.jsx)(n.xs,{className:"py-1 h-8",children:e.isPlaceholder?null:(0,r.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(n.RM,{children:c?(0,t.jsx)(n.SC,{children:(0,t.jsx)(n.pj,{colSpan:a.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:m})})})}):h.getRowModel().rows.length>0?h.getRowModel().rows.map(e=>(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(n.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(n.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id))}),e.getIsExpanded()&&(0,t.jsx)(n.SC,{children:(0,t.jsx)(n.pj,{colSpan:e.getVisibleCells().length,className:"p-0",children:(0,t.jsx)("div",{className:"w-full max-w-full overflow-hidden box-border",children:d({row:e})})})})]},e.id)):(0,t.jsx)(n.SC,{children:(0,t.jsx)(n.pj,{colSpan:a.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:u})})})})})]})})}}}]);